<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è®¡ç»„ç»„æˆåŸç†</title>
      <link href="2021/06/23/ji-zu-xue-xi/"/>
      <url>2021/06/23/ji-zu-xue-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¡ç®—è®¡ç»„æˆåŸç†"><a href="#è®¡ç®—è®¡ç»„æˆåŸç†" class="headerlink" title="è®¡ç®—è®¡ç»„æˆåŸç†"></a>è®¡ç®—è®¡ç»„æˆåŸç†</h2><span id="more"></span><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="å„ç§æœºå™¨çš„è¡¨ç¤º"><a href="#å„ç§æœºå™¨çš„è¡¨ç¤º" class="headerlink" title="å„ç§æœºå™¨çš„è¡¨ç¤º"></a>å„ç§æœºå™¨çš„è¡¨ç¤º</h3><ul><li>åç </li></ul><p>åç å°±ä¸å¤šèµ˜è¿°äº†ï¼Œå¾ˆç®€å•ï¼›</p><ul><li>ç§»ç </li></ul><p>ç§»ç ï¼Œå½“å‰äºŒè¿›åˆ¶ï¼ŒåŠ ä¸Š 2çš„ n-1 æ¬¡æ–¹ï¼›</p><p>Qï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç§»ç ï¼Ÿ</p><p>A:    å› ä¸ºè¦ä½¿ç”¨ç§»ç æ¥æ¯”è¾ƒæ¬¡æ–¹çš„å¤§å°ï¼Œå¦‚æœç”¨ä¼ ç»Ÿçš„è¡¥ç ï¼Œæ¯”è¾ƒæ¯”è¾ƒéº»çƒ¦ã€‚</p><ul><li>è¡¥ç </li></ul><p>è´Ÿæ•°çš„è¡¥ç ï¼šå„ä½å–åï¼Œæœ«ä½åŠ 1ï¼›</p><p>å‡ ä¸ªç‰¹æ®Šçš„è¡¥ç </p><p>[-2^n-1]_è¡¥ = 2^n - 2^n-1 = 10â€¦0 (n-1ä¸ª0)ï¼ˆmod 2^nï¼‰</p><figure class="highlight matlab"><table><tbody><tr><td class="code"><pre><span class="line">[<span class="number">-2</span>^n<span class="number">-1</span>]_è¡¥ = <span class="number">2</span>^n - <span class="number">2</span>^n<span class="number">-1</span> = <span class="number">10.</span>.<span class="number">.0</span> (n<span class="number">-1</span>ä¸ª<span class="number">0</span>)ï¼ˆ<span class="built_in">mod</span> <span class="number">2</span>^nï¼‰</span><br></pre></td></tr></tbody></table></figure><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210721132105412.png" alt="image-20210721132105412"></p><h2 id="CPUçš„ç»„æˆ"><a href="#CPUçš„ç»„æˆ" class="headerlink" title="CPUçš„ç»„æˆ"></a>CPUçš„ç»„æˆ</h2><ul><li>æ§åˆ¶å™¨ </li></ul><p>è´Ÿè´£ä»ä¸»å­˜ä¸­å–å‡ºæŒ‡ä»¤ï¼Œå¹¶ç¡®å®šæŒ‡ä»¤ç±»å‹</p><ul><li>ALU algorithm logical unit</li></ul><p>è¿›è¡ŒåŠ æ³•è¿ç®—å’Œé€»è¾‘ä¸ç­‰è¿ç®—çš„å¤„ç†å™¨</p><ul><li>å¯„å­˜å™¨ç»„</li></ul><p>å®ƒä»¬å±äºCPUå†…éƒ¨ï¼Œèƒ½è¢«CPUé«˜é€Ÿè¯»å–</p><ol><li><p>PC ç¨‹åºè®¡æ•°å™¨ï¼ŒæŒ‡å‘ä¸‹ä¸€æ¡å°†è¢«å–å‡ºæ‰§è¡Œçš„æŒ‡ä»¤ï¼ˆå®ƒ<code>æ²¡æœ‰ä»»ä½•è®¡æ•°å™¨çš„åŠŸèƒ½</code>ï¼‰</p></li><li><p>IR Instruction Registerï¼Œå­˜æ”¾å½“å‰æ­£è¢«æ‰§è¡Œçš„æŒ‡ä»¤</p></li></ol><h2 id="æŒ‡ä»¤æ‰§è¡Œæµç¨‹"><a href="#æŒ‡ä»¤æ‰§è¡Œæµç¨‹" class="headerlink" title="æŒ‡ä»¤æ‰§è¡Œæµç¨‹"></a>æŒ‡ä»¤æ‰§è¡Œæµç¨‹</h2><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210714131617284.png" alt="æœºå™¨æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹"></p><ul><li>å–æŒ‡é˜¶æ®µ<ul><li>å–æŒ‡ä»¤ ï¼šå»PCæ‰€æŒ‡å‘çš„å•å…ƒå–å‡ºæŒ‡ä»¤ï¼Œé€åˆ°æŒ‡ä»¤å¯„å­˜å™¨IRï¼Œå¹¶å¢é‡PC</li><li>PC + â€1â€œï¼ˆè¿™é‡Œçš„ 1 æ˜¯æŒ‡ä¸€ä¸ªæŒ‡ä»¤çš„é•¿åº¦ï¼Œé•¿åº¦æœ‰å›ºå®šçš„å’Œä¸å›ºå®šçš„çœ‹èŠ¯ç‰‡ï¼‰<ul><li>ä¸€å®šå‘ç”Ÿåœ¨ä¸‹æ¡æŒ‡ä»¤è°ƒç”¨ä¹‹å‰æ‰§è¡Œå®Œæˆï¼Œæ²¡æœ‰å¿…è¦åœ¨ä¸€å¼€å§‹å°±æ‰§è¡Œ</li><li>å¹¶ä¸”å–æŒ‡ä»¤ï¼Œå’ŒPC+1 è¿™ä¸ªæ“ä½œæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„</li></ul></li></ul></li><li>æ‰§è¡Œé˜¶æ®µ<ul><li>æŒ‡ä»¤è¯‘ç ï¼šcpuæ ¹æ®ä¸åŒæŒ‡ä»¤è¯‘ç å‡ºä¸åŒçš„æ§åˆ¶ä¿¡å·</li><li>æºæ“ä½œæ•°åœ°å€è®¡ç®—å¹¶å–æ“ä½œæ•°ï¼šæ ¹æ®å¯»å€æ–¹å¼ç¡®å®šæºæ“ä½œæ•°åœ°å€<ul><li>å¦‚æœæ˜¯å­˜å‚¨å™¨æ•°æ®ï¼Œéœ€è¦ä¸€æ¬¡æˆ–è€…å¤šæ¬¡è®¿å­˜</li><li>å¦‚æœæ˜¯é—´æ¥å¯»å€ï¼Œæˆ–ä¸¤æ“ä½œæ•°éƒ½åœ¨å­˜å‚¨å™¨ä¸­çš„åŒç›®è¿ç®—ï¼Œåˆ™éœ€è¦å¤šæ¬¡è®¿é—®</li><li>å¦‚æœå¯„å­˜å™¨å¯»å€ï¼Œç›´æ¥ä»å¯„å­˜å™¨ä¸­å–å‡º</li></ul></li><li>æ‰§è¡Œæ•°æ®æ“ä½œï¼ˆè¿›è¡Œç®—æœ¯/é€»è¾‘è¿ç®—ï¼‰ï¼šå¯¹å–å‡ºæ¥çš„æ•°è¿›è¡Œè¿ç®—</li><li>ç›®çš„æ“ä½œæ•°åœ°å€è®¡ç®—å¹¶ä¿å­˜ç»“æœ<ul><li>ï¼ˆé—´æ¥å¯»å€ï¼‰å¦‚æœæ˜¯å­˜å‚¨å™¨æ•°æ®ï¼Œéœ€è¦ä¸€æ¬¡æˆ–è€…å¤šæ¬¡è®¿å­˜</li><li>å¦‚æœå¯„å­˜å™¨å¯»å€ï¼Œç›´æ¥å­˜å‚¨åˆ°å¯„å­˜å™¨ä¸­</li></ul></li><li>æŒ‡ä»¤åœ°å€è®¡ç®—å¹¶å°†å…¶é€åˆ°PC<ul><li>é¡ºåºæ‰§è¡Œæ—¶ï¼šPCåŠ ä¸Šå½“å‰æŒ‡ä»¤çš„é•¿åº¦</li><li>é‡åˆ°è½¬ç§»ç±»æŒ‡ä»¤æ—¶ï¼šéœ€è¦æ ¹æ®æ¡ä»¶ç ï¼Œæ“ä½œç å’Œå¯»å€æ–¹å¼ç­‰ç¡®å®šä¸‹æŒ‡ä»¤åœ°å€</li></ul></li></ul></li></ul><h6 id="æœ€ç»ˆä¸Šé¢æ‰€æœ‰çš„æ­¥éª¤éƒ½éœ€è¦è¿›è¡Œæ•è·å¼‚å¸¸"><a href="#æœ€ç»ˆä¸Šé¢æ‰€æœ‰çš„æ­¥éª¤éƒ½éœ€è¦è¿›è¡Œæ•è·å¼‚å¸¸" class="headerlink" title="æœ€ç»ˆä¸Šé¢æ‰€æœ‰çš„æ­¥éª¤éƒ½éœ€è¦è¿›è¡Œæ•è·å¼‚å¸¸"></a>æœ€ç»ˆä¸Šé¢æ‰€æœ‰çš„æ­¥éª¤éƒ½éœ€è¦è¿›è¡Œæ•è·å¼‚å¸¸</h6><p>å¼‚å¸¸ï¼šæº¢å‡ºï¼Œè¶Šç•Œï¼Œå­˜é”™åœ°å€ ä¹‹ç±»çš„</p><p>ä¸­æ–­ï¼š å¤–éƒ¨å› ç´ ä¸­æ–­ï¼Œå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†</p>]]></content>
      
      
      
        <tags>
            
            <tag> zxh </tag>
            
            <tag> è®¡ç®—æœºåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å †æ’åºï¼ˆjavaå®ç°</title>
      <link href="2021/05/12/dui-pai-xu-java-shi-xian/"/>
      <url>2021/05/12/dui-pai-xu-java-shi-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="å †æ’åºçš„åº”ç”¨å’Œå®ç°"><a href="#å †æ’åºçš„åº”ç”¨å’Œå®ç°" class="headerlink" title="å †æ’åºçš„åº”ç”¨å’Œå®ç°"></a>å †æ’åºçš„åº”ç”¨å’Œå®ç°</h1><span id="more"></span><h2 id="å †æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å †ï¼Ÿ"><a href="#å †æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å †ï¼Ÿ" class="headerlink" title="å †æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å †ï¼Ÿ"></a>å †æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å †ï¼Ÿ</h2><p>å †æ˜¯ä»¥æ•°ç»„çš„å½¢å¼è¿›è¡Œç»´æŠ¤çš„ã€‚</p><p>å‘ˆç°å‡ºä¸€æ£µå®Œå…¨äºŒå‰æ ‘</p><p>ä¾‹å¦‚ ï¼šRoot èŠ‚ç‚¹çš„ ä¸‹æ ‡ä¸º 1  ï¼›</p><p>â€‹            Left èŠ‚ç‚¹çš„ä¸‹æ ‡ä¸º 2 ï¼ˆ root * 2ï¼‰ï¼›</p><p>â€‹          Right èŠ‚ç‚¹çš„ä¸‹æ ‡ä¸º3ï¼›ï¼ˆroot * 2 +1ï¼‰</p><p><code>å…³é”®</code>ï¼š åŠ¨æ€</p><p>æ—¶é—´å¤æ‚åº¦ ï¼š NlogM</p><h3 id="ä½¿ç”¨å †å®ç°ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä½¿ç”¨å †å®ç°ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä½¿ç”¨å †å®ç°ä¼˜å…ˆé˜Ÿåˆ—"></a>ä½¿ç”¨å †å®ç°ä¼˜å…ˆé˜Ÿåˆ—</h3><p>ä»€ä¹ˆæ˜¯ä¼˜å…ˆé˜Ÿåˆ—å‘¢ï¼Ÿ</p><p>æ ¹æ®é˜Ÿåˆ—å…ƒç´ çš„ä¼˜å…ˆçº§è¿›è¡Œæ’åºçš„é˜Ÿåˆ—</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> å † </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lambdaè¡¨è¾¾å¼çš„ç”¨æ³•æ€»ç»“</title>
      <link href="2021/05/05/lambda-biao-da-shi-de-yong-fa-zong-jie/"/>
      <url>2021/05/05/lambda-biao-da-shi-de-yong-fa-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"><a href="#Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨" class="headerlink" title="Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨"></a>Lambdaè¡¨è¾¾å¼çš„ä½¿ç”¨</h1><span id="more"></span><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/AWS-Lambda-libreri%CC%81as-y-binarios-Morris-Opazo.jpeg" alt="AWS-Lambda-libreriÌas-y-binarios-Morris-Opazo"></p><h2 id="map-æ–¹æ³•"><a href="#map-æ–¹æ³•" class="headerlink" title="map()æ–¹æ³•"></a>map()æ–¹æ³•</h2><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section"># ä½¿ç”¨ map é‡æ„ Collection<span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span></span></span></span><br><span class="line">   result.stream().map(t-&gt;{</span><br><span class="line">   ...å†™è‡ªå·±çš„é€»è¾‘</span><br><span class="line">   return ç»“æœï¼ˆå°†æ¯ä¸€é¡¹çš„ç»“æœæ”¹å˜ï¼‰</span><br><span class="line">   }).collect(Collectors.toList);</span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure><h2 id="distinct-çš„æ›¿ä»£"><a href="#distinct-çš„æ›¿ä»£" class="headerlink" title="distinct()çš„æ›¿ä»£"></a>distinct()çš„æ›¿ä»£</h2><figure class="highlight markdown"><table><tbody><tr><td class="code"><pre><span class="line"><span class="section"># ä½¿ç”¨filter + è‡ªå®šä¹‰æ–¹æ³• æ›¿ä»£ distinctï¼ˆï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="section">### è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line"><span class="code">    public static&lt;T&gt; Predicate&lt;T&gt; distinctByKey(Function&lt;? super T, Object&gt; keyExtractor){</span></span><br><span class="line"><span class="code">   Map&lt;Object,Boolean&gt; seen = new ConcurrentHashMap&lt;&gt;();</span></span><br><span class="line"><span class="code">   return object -&gt; seen.putIfAbsent(keyExtractor.apply(object), Boolean.TRUE) == null;</span></span><br><span class="line"><span class="code">   }</span></span><br><span class="line"><span class="code">   </span></span><br><span class="line"><span class="code">### å®é™…ç”¨æ³•ï¼ˆæ ¹æ®userçš„name å»é‡ï¼‰</span></span><br><span class="line"><span class="code">   result.stream().filter(User::getName).....</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å¤ä¹ -JavaåŸºç¡€</title>
      <link href="2021/05/05/mian-shi-fu-xi-java-ji-chu/"/>
      <url>2021/05/05/mian-shi-fu-xi-java-ji-chu/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaåŸºç¡€"><a href="#JavaåŸºç¡€" class="headerlink" title="JavaåŸºç¡€"></a>JavaåŸºç¡€</h1><span id="more"></span><h2 id="åŸºç¡€æ¦‚å¿µä¸å¸¸è¯†"><a href="#åŸºç¡€æ¦‚å¿µä¸å¸¸è¯†" class="headerlink" title="åŸºç¡€æ¦‚å¿µä¸å¸¸è¯†"></a>åŸºç¡€æ¦‚å¿µä¸å¸¸è¯†</h2><h3 id="Java-è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹"><a href="#Java-è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹" class="headerlink" title="Java è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹"></a>Java è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹</h3><blockquote><p>é¢å‘å¯¹è±¡ï¼ˆç»§æ‰¿ï¼Œå¤šæ€ï¼Œå°è£…ï¼‰ï¼Œå¹³å°æ— å…³æ€§ï¼Œæ”¯æŒå¤šçº¿ç¨‹</p></blockquote><hr><h3 id="JVM-vs-JDK-vs-JRE"><a href="#JVM-vs-JDK-vs-JRE" class="headerlink" title="JVM vs JDK vs JRE"></a>JVM vs JDK vs JRE</h3><h4 id="ä»€ä¹ˆæ˜¯-JVMï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-JVMï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ JVMï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ JVMï¼Ÿ</h4><blockquote><p>Java Virtual Machine è™šæ‹Ÿæœºï¼Œè¿›è¡Œå¯¹è±¡å†…å­˜ç®¡ç†çš„å¹³å°ï¼Œé’ˆå¯¹ä¸åŒç³»ç»Ÿçš„ç‰¹å®šå®ç°ï¼Œç›®çš„æ˜¯ä½¿ç”¨ç›¸åŒçš„å­—èŠ‚ç ï¼Œéƒ½ä¼šç»™å‡ºç›¸åŒçš„ç»“æœ</p></blockquote><h4 id="ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ</h4><blockquote><p>æ‰©å±•åä¸º .class çš„æ–‡ä»¶</p></blockquote><p>![Javaç¨‹åºè¿è¡Œæ­¥éª¤](/Users/zhangxuhui/Library/Application Support/typora-user-images/image-20210505134830133.png)</p><h4 id="ä»€ä¹ˆæ˜¯-JDKï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-JDKï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ JDKï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ JDKï¼Ÿ</h4><blockquote><p>Java ç¨‹åºè¿è¡Œéœ€è¦çš„ä¾èµ–ï¼Œå®ƒæ˜¯åŠŸèƒ½é½å…¨çš„ Java SDKã€‚å®ƒæ‹¥æœ‰ JRE æ‰€æ‹¥æœ‰çš„ä¸€åˆ‡ï¼Œè¿˜æœ‰ç¼–è¯‘å™¨ï¼ˆjavacï¼‰å’Œå·¥å…·ï¼ˆå¦‚ javadoc å’Œ jdbï¼‰ã€‚å®ƒèƒ½å¤Ÿåˆ›å»ºå’Œç¼–è¯‘ç¨‹åºã€‚</p></blockquote><h4 id="ä»€ä¹ˆæ˜¯JRE-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯JRE-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯JRE ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯JRE ï¼Ÿ</h4><blockquote><p>JDK çš„ä½é…ç‰ˆæœ¬ï¼Œæ˜¯ Java è¿è¡Œæ—¶ç¯å¢ƒã€‚å®ƒæ˜¯è¿è¡Œå·²ç¼–è¯‘ Java ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å†…å®¹çš„é›†åˆï¼ŒåŒ…æ‹¬ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼ŒJava ç±»åº“ï¼Œjava å‘½ä»¤å’Œå…¶ä»–çš„ä¸€äº›åŸºç¡€æ„ä»¶ã€‚ä½†æ˜¯ï¼Œå®ƒä¸èƒ½ç”¨äºåˆ›å»ºæ–°ç¨‹åºã€‚</p></blockquote><hr><h3 id="ä¸ºä»€ä¹ˆè¯´-Java-è¯­è¨€â€ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¯´-Java-è¯­è¨€â€ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¯´ Java è¯­è¨€â€ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¯´ Java è¯­è¨€â€ç¼–è¯‘ä¸è§£é‡Šå¹¶å­˜â€ï¼Ÿ</h3><p>æ„Ÿè§‰ä¸ä¼šé—®ï¼Œå…ˆå¿½ç•¥</p><hr><h3 id="Oracle-JDK-å’Œ-OpenJDK-çš„å¯¹æ¯”"><a href="#Oracle-JDK-å’Œ-OpenJDK-çš„å¯¹æ¯”" class="headerlink" title="Oracle JDK å’Œ OpenJDK çš„å¯¹æ¯”"></a>Oracle JDK å’Œ OpenJDK çš„å¯¹æ¯”</h3><p>æ„Ÿè§‰ä¸ä¼šé—®ï¼Œå…ˆå¿½ç•¥</p><hr><h3 id="Java-å’Œ-C-çš„åŒºåˆ«"><a href="#Java-å’Œ-C-çš„åŒºåˆ«" class="headerlink" title="Java å’Œ C ++ çš„åŒºåˆ«"></a>Java å’Œ C ++ çš„åŒºåˆ«</h3><p>æ„Ÿè§‰ä¸ä¼šé—®ï¼Œå…ˆå¿½ç•¥</p><hr><h3 id="Import-Java-å’Œ-javax-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#Import-Java-å’Œ-javax-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="Import Java å’Œ javax æœ‰ä»€ä¹ˆåŒºåˆ«"></a>Import Java å’Œ javax æœ‰ä»€ä¹ˆåŒºåˆ«</h3><blockquote><p>åˆšå¼€å§‹çš„æ—¶å€™ JavaAPI æ‰€å¿…éœ€çš„åŒ…æ˜¯ java å¼€å¤´çš„åŒ…ï¼Œjavax å½“æ—¶åªæ˜¯æ‰©å±• API åŒ…æ¥ä½¿ç”¨ã€‚ç„¶è€Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œjavax é€æ¸åœ°æ‰©å±•æˆä¸º Java API çš„ç»„æˆéƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œå°†æ‰©å±•ä» javax åŒ…ç§»åŠ¨åˆ° java åŒ…ç¡®å®å¤ªéº»çƒ¦äº†ï¼Œæœ€ç»ˆä¼šç ´åä¸€å †ç°æœ‰çš„ä»£ç ã€‚å› æ­¤ï¼Œæœ€ç»ˆå†³å®š javax åŒ…å°†æˆä¸ºæ ‡å‡† API çš„ä¸€éƒ¨åˆ†ã€‚</p><p>æ‰€ä»¥ï¼Œå®é™…ä¸Š java å’Œ javax æ²¡æœ‰åŒºåˆ«ã€‚è¿™éƒ½æ˜¯ä¸€ä¸ªåå­—ã€‚</p></blockquote><hr><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><h3 id="java-ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹"><a href="#java-ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹"></a>java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹</h3><blockquote><p>java è¦ç¡®å®šæ¯ç§åŸºæœ¬ç±»å‹æ‰€å å­˜å‚¨ç©ºé—´çš„å¤§å°ã€‚ä»–ä»¬çš„å¤§å°å¹¶ä¸åƒå…¶ä»–å¤§å¤šæ•°è¯­è¨€é‚£æ ·éšæœºå™¨ç¡¬ä»¶æ¶æ„çš„å˜åŒ–è€Œå˜åŒ–ã€‚è¿™ç§å å­˜å‚¨ç©ºé—´å¤§å°çš„ä¸å˜æ€§æ˜¯Javaç¨‹åºæ¯”ç”¨å…¶ä»–å¤§å¤šæ•°è¯­è¨€ç¼–å†™çš„ç¨‹åºæ›´å…·å¯ç§»æ¤æ€§çš„åŸå› ä¹‹ä¸€ã€‚</p></blockquote><p>![åŸºæœ¬æ•°æ®ç±»å‹](/Users/zhangxuhui/Library/Application Support/typora-user-images/image-20210505135743767.png)</p><h2 id="HashMap-å’Œ-HashTable-çš„åŒºåˆ«"><a href="#HashMap-å’Œ-HashTable-çš„åŒºåˆ«" class="headerlink" title="HashMap å’Œ HashTable çš„åŒºåˆ«"></a>HashMap å’Œ HashTable çš„åŒºåˆ«</h2><blockquote><p>HashMap å’Œ HashTable å®ç°æ–¹æ³•åŸºæœ¬éƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œä½†æ˜¯ HashTable é‡Œçš„æ–¹æ³•åŸºæœ¬ä¸Šéƒ½åŠ äº† synchronized å…³é”®å­—ã€‚</p><p>å½“ä½œä¸ºå…±äº«å˜é‡æ—¶ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨HashMap å’Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨ HashMap çš„ç»“æœå¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>ä½†æˆ‘ä»¬ä¹ŸåŸºæœ¬ä¸ç”¨HashTable ï¼Œæ•ˆç‡å¤ªä½ï¼ŒåŸºæœ¬éƒ½ç”¨ concurrentHashMap </p><p>HashMap å¯ä»¥å…è®¸ key å’Œ value ä¸º null ï¼ŒHashTable æ˜¯ä¸å…è®¸çš„ã€‚</p></blockquote><h3 id="åº•å±‚å®ç°ï¼šæ•°ç»„-é“¾è¡¨"><a href="#åº•å±‚å®ç°ï¼šæ•°ç»„-é“¾è¡¨" class="headerlink" title="åº•å±‚å®ç°ï¼šæ•°ç»„+é“¾è¡¨"></a>åº•å±‚å®ç°ï¼šæ•°ç»„+é“¾è¡¨</h3><blockquote><p>Jdk8 å¼€å§‹é“¾è¡¨é«˜åº¦è¾¾åˆ°8ï¼Œæ•°ç»„é•¿åº¦è¶…è¿‡64ï¼Œé“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œå…ƒç´ ä»¥å†…éƒ¨ç±»Node èŠ‚ç‚¹å­˜åœ¨</p><ul><li>æ’å…¥æ•°æ®çš„è¿‡ç¨‹<ul><li>è®¡ç®— K çš„ hash å€¼ ï¼ŒäºŒæ¬¡ hash ç„¶åå¯¹æ•°ç»„é•¿åº¦å–æ¨¡ï¼Œå¾—åˆ°å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡<ul><li>å¦‚æœå–åˆ°çš„ä¸‹æ ‡ æ²¡æœ‰äº§ç”Ÿ hash å†²çªï¼ˆä¸‹æ ‡ä½ç½®æ²¡æœ‰å…ƒç´ ï¼‰ï¼Œåˆ™ç›´æ¥åˆ›å»º Node æ’å…¥</li><li>å¦‚æœå–åˆ°çš„ä¸‹æ ‡ äº§ç”Ÿäº† hahs å†²çªï¼Œå…ˆè¿›è¡Œ equals æ¯”è¾ƒï¼Œè¿™é‡Œå¦‚æœæ²¡æœ‰é‡å†™ equals æ–¹æ³•ï¼Œé»˜è®¤æ˜¯â€œ==â€ï¼Œé‡å†™äº†å°±æŒ‰ç…§ä½ è‡ªå·±çš„é€»è¾‘æ¥æ¯”è¾ƒã€‚å¦‚æœ equals çš„ç»“æœ æ˜¯true é‚£å°±è¦†ç›–ï¼Œç»“æœæ˜¯ false ï¼Œåˆ™åˆ¤æ–­é“¾è¡¨çš„é«˜åº¦æ’å…¥é“¾è¡¨<ul><li>ï¼ˆé“¾è¡¨é«˜åº¦åˆ°8è½¬åŒ–æˆçº¢é»‘æ ‘ï¼Œå¹¶ä¸”æ•°ç»„é•¿åº¦åˆ°64åˆ™è½¬å˜ä¸ºçº¢é»‘æ ‘ï¼Œé•¿åº¦ä½äº6åˆ™å°†çº¢é»‘æ ‘è½¬ä¼šé“¾è¡¨ï¼‰</li></ul></li></ul></li><li>å½“ K ä¸º null æ—¶ï¼Œå°†æ•°æ®å­˜å‚¨åœ¨ä¸‹æ ‡ä¸º 0 åˆ°ä½ç½®</li></ul></li><li>æ•°ç»„æ‰©å®¹<ul><li>å½“æ•°ç»„æ»¡äº†ï¼Œé‚£ä¹ˆå°± new ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå°†åŸæ¥çš„æ•°ç»„ copy è¿›å»ï¼Œæ•°ç»„çš„æ‰©å®¹é•¿åº¦æ ¹æ®æ‰©å®¹å› å­è€Œæ¥ã€‚</li></ul></li></ul></blockquote><h3 id="ConcurrentHashMapåŸç†"><a href="#ConcurrentHashMapåŸç†" class="headerlink" title="ConcurrentHashMapåŸç†"></a>ConcurrentHashMapåŸç†</h3><blockquote><ul><li><p>jdk7 </p><ul><li>æ•°æ®ç»“æ„ï¼šReentrantLocl + Segment + HashEntry ï¼Œ ä¸€ä¸ª Segment ä¸­åŒ…å«ä¸€ä¸ª HashEntry æ•°ç»„ï¼Œæ¯ä¸ª HashEntry åˆæ˜¯ä¸€ä¸ªé“¾è¡¨ç»“æ„</li></ul><p>è¿™ä¸ªHashEntryæœ‰ç‚¹ç±»ä¼¼äº HashMap </p><ul><li>é” ï¼šSegment åˆ†æ®µé”ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±åƒæ˜¯æŠŠä¸€æ•´å¤§æ®µå¤§ä¸œè¥¿åˆ†æˆå°æ®µï¼Œæ¯ä¸€ä¸ªå°æ®µéƒ½æ˜¯ç‹¬ç«‹ï¼Œéƒ½æ‹¥æœ‰è‡ªå·±çš„ä¸€æŠŠé”ï¼Œåªé”å®šè‡ªå·±çš„ä¸€ä¸ªæ®µï¼Œé”çš„åŠ›åº¦è¦å°ä¸€ç‚¹ï¼Œæ‰€ä»¥æ•ˆç‡é«˜ä¸€ç‚¹ã€‚</li><li>æ‰©å®¹ï¼š æ‰©å®¹çš„æ—¶å€™ï¼Œåªæ‰©å®¹å½“å‰çš„segment</li><li>å¹¶å‘åº¦ï¼š ä¸º segment çš„ä¸ªæ•°</li><li>å…ƒç´ æŸ¥è¯¢ï¼šè¿›è¡Œä¸¤æ¬¡ hash<ul><li>ç¬¬ä¸€æ¬¡ hashï¼šå®šä½åˆ°å“ªä¸€ä¸ªsegment</li><li>ç¬¬äºŒæ¬¡ hashï¼šå®šä½åˆ°å…ƒç´ æ‰€åœ¨çš„é“¾è¡¨çš„å¤´éƒ¨ï¼ˆsegment å†…éƒ¨æ˜¯ç±»ä¼¼äº HashMapçš„ç»“æ„ï¼Œä¹Ÿå°±æ˜¯è¦æ‰¾åˆ°æ•°ç»„çš„ä¸‹æ ‡ï¼‰</li></ul></li><li>å…ƒç´ ï¼šä¹Ÿæ˜¯é€šè¿‡ Node æ¥å­˜å‚¨çš„ï¼ŒVal æ˜¯é€šè¿‡ volatile ä¿®é¥°çš„ ä»è€Œä¿è¯äº†å¯è§æ€§ã€‚</li></ul></li><li><p>jdk8</p><ul><li>æ•°æ®ç»“æ„ï¼šsynchronized + CASï¼ˆä¹è§‚é”ï¼‰+ Node + çº¢é»‘æ ‘ï¼ŒNode çš„ val å’Œ next éƒ½ç”¨ volatile ä¿®é¥°ï¼Œä¿è¯å¯è§æ€§</li><li>CAS(Compare And Swap)ï¼šè¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¹è§‚é”,ä¹è§‚é”ï¼Œä¼šä»¥ä¸€ç§æ›´åŠ ä¹è§‚çš„æ€åº¦å¯¹å¾…äº‹æƒ…ï¼Œè®¤ä¸ºè‡ªå·±å¯ä»¥æ“ä½œæˆåŠŸã€‚å½“å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªå…±äº«èµ„æºæ—¶ï¼Œä»…èƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹åŒä¸€æ—¶é—´è·å¾—é”æˆåŠŸï¼Œåœ¨ä¹è§‚é”ä¸­ï¼Œå…¶ä»–çº¿ç¨‹å‘ç°è‡ªå·±æ— æ³•æˆåŠŸè·å¾—é”ï¼Œå¹¶ä¸ä¼šåƒæ‚²è§‚é”é‚£æ ·é˜»å¡çº¿ç¨‹ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ï¼Œå¯ä»¥å»é€‰æ‹©å†æ¬¡é‡è¯•è·å¾—é”ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€€å‡º.</li><li>é”ï¼šé”é“¾è¡¨çš„ head èŠ‚ç‚¹ï¼Œä¸å½±å“å…¶ä»–å…ƒç´ è¯»å†™ï¼Œé”ç²’åº¦æ›´ç»†ï¼Œæ•ˆç‡æ›´é«˜ã€‚</li><li>æ‰©å®¹ï¼šé˜»å¡æ‰€æœ‰çš„è¯»å†™æ“ä½œã€å¹¶å‘æ‰©å®¹</li><li>è¯»æ“ä½œæ— é”ï¼šNode çš„ val å’Œ next éƒ½ç”¨ volatile ä¿®é¥°ï¼Œä¿è¯å¯è§æ€§ï¼Œä¸ä¼šè¯»åˆ°è„æ•°æ®ï¼Œæ•°ç»„ç”¨ volatile ä¿®é¥°ï¼Œä¿è¯æ‰©å®¹æ—¶è¢«è¯»çº¿ç¨‹æ„ŸçŸ¥ã€‚</li></ul></li></ul></blockquote><hr><h2 id="å¦‚ä½•å®ç°ä¸€ä¸ª-IOC-å®¹å™¨ï¼Ÿ"><a href="#å¦‚ä½•å®ç°ä¸€ä¸ª-IOC-å®¹å™¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°ä¸€ä¸ª IOC å®¹å™¨ï¼Ÿ"></a>å¦‚ä½•å®ç°ä¸€ä¸ª IOC å®¹å™¨ï¼Ÿ</h2><blockquote><ul><li>é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šéœ€è¦æ‰«æçš„åŒ…è·¯å¾„</li><li>å®šä¹‰ä¸€äº›æ³¨è§£ï¼Œåˆ†åˆ«è¡¨ç¤ºè®¿é—®æ§åˆ¶å±‚ã€ä¸šåŠ¡æœåŠ¡å±‚ã€æ•°æ®æŒä¹…å±‚ã€ä¾èµ–æ³¨å…¥æ³¨è§£ã€è·å–é…ç½®æ–‡ä»¶æ³¨è§£</li><li>ä»é…ç½®æ–‡ä»¶ä¸­è·å–éœ€è¦æ‰«æçš„åŒ…è·¯å¾„ï¼Œè·å–åˆ°å½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶ä¿¡æ¯åŠæ–‡ä»¶å¤¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†å½“å‰è·¯å¾„ä¸‹æ‰€æœ‰ä»¥.class ç»“å°¾çš„æ–‡ä»¶æ·»åŠ åˆ°ä¸€ä¸ªSeté›†åˆä¸­è¿›è¡Œå­˜å‚¨</li><li>éå†è¿™ä¸ªset é›†åˆï¼Œè·å–åœ¨ç±»ä¸Šæœ‰æŒ‡å®šæ³¨è§£åˆ°ç±»ï¼Œå¹¶å°†å…¶äº¤ç»™IOCå®¹å™¨ï¼Œå®šä¹‰ä¸€ä¸ªå®‰å…¨çš„Mapç”¨æ¥å­˜å‚¨è¿™äº›å¯¹è±¡</li><li>éå†è¿™ä¸ªIOC å®¹å™¨ï¼Œè·å–æ¯ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œåˆ¤æ–­é‡Œé¢æ˜¯æœ‰ä¾èµ–å…¶ä»–çš„ç±»çš„å®ä¾‹ï¼Œç„¶åè¿›è¡Œé€’å½’æ³¨å…¥</li></ul></blockquote><h2 id="Javaä¸­æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Ÿ"><a href="#Javaä¸­æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Ÿ" class="headerlink" title="Javaä¸­æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Ÿ"></a>Javaä¸­æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Ÿ</h2><blockquote><ul><li>bootstrap ClassLoaderï¼š<ul><li>æ˜¯<code>ExtClassLoader</code>çš„çˆ¶ç±»åŠ è½½å™¨ï¼Œå¹¶ä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼Œéƒ½æ˜¯é€šè¿‡ä¸€ä¸ªparent å˜é‡å»ç»´æŠ¤çš„ï¼Œå¹¶ä¸æ˜¯çœŸçš„ç»§æ‰¿ã€‚é»˜è®¤è´Ÿè´£åŠ è½½%<code>JAVA_HOME</code>%lib ä¸‹çš„jaråŒ…å’Œclass æ–‡ä»¶</li></ul></li><li>ExtClassLoaderï¼š<ul><li>æ˜¯<code>AppClassLoader</code> çš„çˆ¶ç±»åŠ è½½å™¨ï¼Œä¹Ÿä¸æ˜¯åœ¨çœŸæ­£çš„ç»§æ‰¿å…³ç³»ã€‚è´Ÿè´£åŠ è½½%JAVA_HOME%/lib/ext æ–‡ä»¶å¤¹ä¸‹çš„jaråŒ…å’Œclass ç±»ã€‚</li></ul></li><li>AppClassLoader<ul><li>æ˜¯è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„çˆ¶ç±»ï¼Œè´Ÿè´£åŠ è½½ <code>classpath</code> ä¸‹çš„ç±»æ–‡ä»¶</li></ul></li><li>è‡ªå®šä¹‰ç±»åŠ è½½å™¨<ul><li>ç»§æ‰¿ <code>ClassLoader</code> å®ç°è‡ªå®šä¹‰ç±»åŠ è½½å™¨</li></ul></li><li>çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨<ul><li>ä¸Šè¿°çš„åŠ è½½å™¨éƒ½å¯ä»¥è®¿é—® <code>çº¿ç¨‹ä¸Šä¸‹æ–‡åŠ è½½å™¨</code></li></ul></li></ul></blockquote><h2 id="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾ï¼Ÿ</h2><blockquote><ul><li>å‘ä¸Šå§”æ´¾ï¼š<ul><li>å®é™…ä¸Šå°±æ˜¯ç±»åŠ è½½å™¨è¦å»åŠ è½½ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®ƒä¸ä¼šç›´æ¥å»åŠ è½½ï¼Œè€Œæ˜¯å…ˆå»ä¸Šå±‚çš„ç±»åŠ è½½å™¨çš„ç¼“å­˜ä¸­æŸ¥æ‰¾ï¼Œæ˜¯å¦åŠ è½½äº†è¯¥ç±»ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ï¼Œæ²¡æœ‰ç»§ç»­å‘ä¸Šã€‚  </li></ul></li><li>å‘ä¸‹æŸ¥æ‰¾ï¼šå½“å‘ä¸Šå§”æ´¾åˆ°æœ€é¡¶å±‚çš„æ—¶å€™ï¼Œè¿˜æ˜¯æœ‰æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œåˆ™ä¼šå»<code>åŠ è½½è·¯å¾„</code>ä¸­æŸ¥æ‰¾ï¼Œæœ‰åˆ™åŠ è½½è¿”å›ï¼Œæ²¡æœ‰åˆ™å‘ä¸‹æŸ¥æ‰¾ã€‚</li><li>Tipsï¼š<ul><li>å‘ä¸Šå§”æ´¾åˆ°é¡¶å±‚åŠ è½½å™¨ä¸ºæ­¢ï¼Œå‘ä¸‹æŸ¥æ‰¾åˆ°å‘èµ·åŠ è½½åˆ°åŠ è½½å™¨åœæ­¢ä¸ºæ­¢</li><li>å¦‚æœåŒäº²å§”æ´¾æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œé‚£ä¹ˆå‘èµ·åŠ è½½çš„ç±»åŠ è½½å™¨ï¼Œå°±ä¼šæŠ¥ç±»æ‰¾ä¸åˆ°çš„å¼‚å¸¸é”™è¯¯</li></ul></li></ul></blockquote><p>![åŒäº²å§”æ´¾æ¨¡å‹](/Users/zhangxuhui/Library/Application Support/typora-user-images/image-20210506141622401.png)</p><h3 id="åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„ï¼Ÿ"><a href="#åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„ï¼Ÿ" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„ï¼Ÿ"></a>åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„ï¼Ÿ</h3><blockquote><ul><li>ä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨æ€§ï¼Œé¿å…ç¨‹åºå‘˜è‡ªå·±ç¼–å†™çš„ç±»åŠ¨æ€æ›¿æ¢æ‰ java çš„ä¸€äº›æ ¸å¿ƒç±»ï¼Œä¸¾ä¸ªä¾‹å­ï¼šå½“ä½ è‡ªå®šä¹‰äº†ä¸€ä¸ª String ç±»ï¼Œä½ è¦å»åŠ è½½å®ƒï¼Œé€šè¿‡å‘ä¸Šå§”æ´¾æœºåˆ¶ï¼Œå®ƒä¼šåœ¨ Bootstrap ClassLoader ä¸­æ‰¾åˆ° Java è‡ªå¸¦çš„ String ï¼Œè€Œä¸ä¼šåŠ è½½ç¨‹åºå‘˜è‡ªå®šä¹‰çš„ String</li><li>åŒæ—¶ä¹Ÿé¿å…äº†ç±»çš„é‡å¤åŠ è½½ï¼Œå› ä¸º jvm ä¸­åŒºåˆ†ä¸åŒç±»ï¼Œä¸ä»…ä»…æ˜¯æ ¹æ®ç±»åï¼Œç›¸åŒçš„classæ–‡ä»¶è¢«ä¸åŒçš„ ClassLoader åŠ è½½å°±æ˜¯ä¸åŒçš„ä¸¤ä¸ªç±»ã€‚</li></ul></blockquote><hr><h2 id="Java-ä¸­çš„å¼‚å¸¸ä½“ç³»ï¼Ÿ"><a href="#Java-ä¸­çš„å¼‚å¸¸ä½“ç³»ï¼Ÿ" class="headerlink" title="Java ä¸­çš„å¼‚å¸¸ä½“ç³»ï¼Ÿ"></a>Java ä¸­çš„å¼‚å¸¸ä½“ç³»ï¼Ÿ</h2><p>ç²’åº¦è›®ç²—çš„ä½“ç³»</p><p>![ç®€å•å¼‚å¸¸ä½“ç³»](/Users/zhangxuhui/Library/Application Support/typora-user-images/image-20210506144601229.png)</p><h2 id="GC-å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥è¢«å›æ”¶"><a href="#GC-å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥è¢«å›æ”¶" class="headerlink" title="GC å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥è¢«å›æ”¶"></a>GC å¦‚ä½•åˆ¤æ–­å¯¹è±¡å¯ä»¥è¢«å›æ”¶</h2>]]></content>
      
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMapé¢è¯•é¢˜</title>
      <link href="2021/04/29/hashmap-mian-shi-ti/"/>
      <url>2021/04/29/hashmap-mian-shi-ti/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>macå®‰è£…rocketMQ</title>
      <link href="2021/04/23/mac-an-zhuang-rocketmq/"/>
      <url>2021/04/23/mac-an-zhuang-rocketmq/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…rocketMq-4-4"><a href="#å®‰è£…rocketMq-4-4" class="headerlink" title="å®‰è£…rocketMq-4.4"></a>å®‰è£…rocketMq-4.4</h1><span id="more"></span><p>æœ¬æ„æ˜¯è¦å®‰è£…æœ€æ–°çš„ï¼Œä¸ºäº†é€‚é…é¡¹ç›®ä¸å¾—å·²è€Œä¸ºä¹‹</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="1-åˆ°å®˜ç½‘ä¸‹è½½è§£å‹"><a href="#1-åˆ°å®˜ç½‘ä¸‹è½½è§£å‹" class="headerlink" title="1 åˆ°å®˜ç½‘ä¸‹è½½è§£å‹"></a>1 åˆ°å®˜ç½‘ä¸‹è½½è§£å‹</h3><p>å®˜ç½‘åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://rocketmq.apache.org/dowloading/releases/">http://rocketmq.apache.org/dowloading/releases/</a></p><p>è§£å‹ï¼š <img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423202917917.png" alt="è§£å‹"></p><h3 id="2-é…ç½®ç¯å¢ƒï¼Ÿ"><a href="#2-é…ç½®ç¯å¢ƒï¼Ÿ" class="headerlink" title="2 é…ç½®ç¯å¢ƒï¼Ÿ"></a>2 é…ç½®ç¯å¢ƒï¼Ÿ</h3><p>mac éœ€è¦é…ç½®ç¯å¢ƒï¼Ÿ ä¸æ™“å¾—å“¦</p><p>åº”è¯¥æ˜¯è¦é…ç½® JAVA_HOME ï¼Œ å®ƒè¦ä¾èµ– <code>java</code> çš„</p><h4 id="2-1-ä¿®æ”¹-runbroker-sh"><a href="#2-1-ä¿®æ”¹-runbroker-sh" class="headerlink" title="2.1 ä¿®æ”¹ runbroker.sh"></a>2.1 ä¿®æ”¹ runbroker.sh</h4><p>![runbroker.sh  ä¿®æ”¹å‰](/Users/zhangxuhui/Library/Application Support/typora-user-images/image-20210423204619519.png)</p><blockquote><ul><li>Xms :  æŒ‡ç¨‹åºå¯åŠ¨æ—¶çš„å†…å­˜å¤§å° ï¼ˆæ­¤å€¼å¯ä»¥è®¾ç½®æˆä¸ -Xmx ç›¸åŒï¼Œä»¥é¿å…æ¯æ¬¡ GC å®Œæˆå JVMå†…å­˜é‡æ–°åˆ†é…ï¼‰</li><li>Xmx ï¼šæŒ‡ç¨‹åºè¿è¡Œæ—¶æœ€å¤§å¯ç”¨å†…å­˜å¤§å°ï¼Œç¨‹åºè¿è¡Œä¸­å†…å­˜å¤§äºè¿™ä¸ªå€¼ä¼š OutOfMemory</li><li>Xmn : å¹´è½»ä»£å¤§å° ï¼ˆæ•´ä¸ªJVMå†…å­˜å¤§å° = å¹´è½»ä»£ + è€å¹´ä»£ + æ°¸ä¹…ä»£ï¼‰</li></ul></blockquote><p>ä¿®æ”¹ä¸ºï¼š</p><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423205919828.png" alt="runbroker.sh ä¿®æ”¹å"></p><h4 id="2-3-ä¿®æ”¹-runserver-sh"><a href="#2-3-ä¿®æ”¹-runserver-sh" class="headerlink" title="2.3 ä¿®æ”¹ runserver.sh"></a>2.3 ä¿®æ”¹ runserver.sh</h4><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423210743957.png" alt="runserver.sh ä¿®æ”¹å"></p><h3 id="3-å¯åŠ¨"><a href="#3-å¯åŠ¨" class="headerlink" title="3 å¯åŠ¨"></a>3 å¯åŠ¨</h3><h4 id="3-1-å¯åŠ¨-nameser"><a href="#3-1-å¯åŠ¨-nameser" class="headerlink" title="3.1 å¯åŠ¨ nameser"></a>3.1 å¯åŠ¨ nameser</h4><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">nohup sh mqnamesrv &amp;</span><br></pre></td></tr></tbody></table></figure><h4 id="3-2-å¯åŠ¨-broker"><a href="#3-2-å¯åŠ¨-broker" class="headerlink" title="3.2 å¯åŠ¨ broker"></a>3.2 å¯åŠ¨ broker</h4><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">nohup sh mqbroker -n 127.0.0.1:9876 autoCreateTopicEnable=true &amp;</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œæœ‰ä¸ªå‘ï¼Œä¸è¦å†™ <code>localhost</code> å°½é‡éƒ½å†™ <code>127.0.0.1</code></p><h4 id="3-3-æŸ¥çœ‹è¿è¡ŒçŠ¶æ€"><a href="#3-3-æŸ¥çœ‹è¿è¡ŒçŠ¶æ€" class="headerlink" title="3.3 æŸ¥çœ‹è¿è¡ŒçŠ¶æ€"></a>3.3 æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</h4><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">21:37:42 with zhangxuhui in local/rocketmq-4.4.0/bin</span><br><span class="line">âœ¦2 âœ jps</span><br><span class="line">42513 Jps</span><br><span class="line">32353 GatewayApplication</span><br><span class="line">42468 BrokerStartup</span><br><span class="line">42379 NamesrvStartup</span><br></pre></td></tr></tbody></table></figure><p>å¯åŠ¨æˆåŠŸ</p><h4 id="3-4-æŸ¥è¯¢å¯åŠ¨æ—¥å¿—"><a href="#3-4-æŸ¥è¯¢å¯åŠ¨æ—¥å¿—" class="headerlink" title="3.4 æŸ¥è¯¢å¯åŠ¨æ—¥å¿—"></a>3.4 æŸ¥è¯¢å¯åŠ¨æ—¥å¿—</h4><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">tail -f ~/logs/rocketmqlogs/namesrv.log</span><br></pre></td></tr></tbody></table></figure><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423214400112.png" alt="namesrvæ—¥å¿—æŸ¥è¯¢"></p><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">tail -f ~/logs/rocketmqlogs/broker.log</span><br></pre></td></tr></tbody></table></figure><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423214419764.png" alt="brokeræ—¥å¿—æŸ¥è¯¢"></p><h4 id="3-5-å…³é—­æœåŠ¡"><a href="#3-5-å…³é—­æœåŠ¡" class="headerlink" title="3.5 å…³é—­æœåŠ¡"></a>3.5 å…³é—­æœåŠ¡</h4><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">mqshutdown broker  //åœæ­¢ broker</span><br></pre></td></tr></tbody></table></figure><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423215013634.png"></p><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">mqshutdown namesrv //åœæ­¢ nameserver</span><br></pre></td></tr></tbody></table></figure><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423215449737.png"></p><h2 id="æ•´åˆspringboot"><a href="#æ•´åˆspringboot" class="headerlink" title="æ•´åˆspringboot"></a>æ•´åˆspringboot</h2><h3 id="1-1é¡¹ç›®ç»“æ„"><a href="#1-1é¡¹ç›®ç»“æ„" class="headerlink" title="1.1é¡¹ç›®ç»“æ„"></a>1.1é¡¹ç›®ç»“æ„</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210424160248187.png" alt="é¡¹ç›®ç»“æ„"></p><h3 id="2-2-éœ€è¦çš„ä¾èµ–"><a href="#2-2-éœ€è¦çš„ä¾èµ–" class="headerlink" title="2.2 éœ€è¦çš„ä¾èµ–"></a>2.2 éœ€è¦çš„ä¾èµ–</h3><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-3-è¯¦ç»†æ–‡ä»¶"><a href="#3-3-è¯¦ç»†æ–‡ä»¶" class="headerlink" title="3.3 è¯¦ç»†æ–‡ä»¶"></a>3.3 è¯¦ç»†æ–‡ä»¶</h3><p><code>provider.java</code></p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zxh.rocketmq;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.exception.MQBrokerException;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.exception.MQClientException;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.SendResult;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.SendStatus;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.Message;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.remoting.exception.RemotingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: AmberZxh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@DateTime</span>: 2021/4/24 10:07 ä¸Šåˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">provider</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MQClientException, RemotingException, InterruptedException, MQBrokerException </span>{</span><br><span class="line">        <span class="comment">// instantiate with a producer group name</span></span><br><span class="line">        DefaultMQProducer producer = <span class="keyword">new</span> DefaultMQProducer(<span class="string">"zxh-group"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// specify nameServer address</span></span><br><span class="line">        producer.setNamesrvAddr(<span class="string">"localhost:9876"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// launch the producer</span></span><br><span class="line"></span><br><span class="line">        producer.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// create a message instance,specifying topic,and message body</span></span><br><span class="line">        Message message = <span class="keyword">new</span> Message(<span class="string">"zxh-topic"</span>, <span class="string">"hello world rocketMQ"</span>.getBytes(StandardCharsets.UTF_8));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// send the message</span></span><br><span class="line">        SendResult sendResult = producer.send(message);</span><br><span class="line"></span><br><span class="line">        System.out.printf(<span class="string">"The info of the send : %s"</span>, sendResult);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(sendResult.getSendStatus().equals(SendStatus.SEND_OK)){</span><br><span class="line">            log.info(<span class="string">"message send successï¼ŒmsgId is:"</span>+sendResult.getMsgId());</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">"message send failed"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>consumer.java</code></p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zxh.rocketmq;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.DefaultMQPushConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.listener.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.exception.MQClientException;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.MessageExt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: AmberZxh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@DateTime</span>: 2021/4/24 10:07 ä¸Šåˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">consumer</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MQClientException </span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Instantiate with specified consumer group name</span></span><br><span class="line">        DefaultMQPushConsumer consumer = <span class="keyword">new</span> DefaultMQPushConsumer(<span class="string">"zxh-group"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// specify name server address</span></span><br><span class="line">        consumer.setNamesrvAddr(<span class="string">"127.0.0.1:9876"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//subscribe one more topics to consume</span></span><br><span class="line">        consumer.subscribe(<span class="string">"zxh-topic"</span>, <span class="string">"*"</span>);</span><br><span class="line"></span><br><span class="line">        consumer.registerMessageListener((MessageListenerConcurrently) (list, consumeConcurrentlyContext) -&gt; {</span><br><span class="line">            MessageExt messageExt = list.get(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = messageExt.getBody();</span><br><span class="line">            System.out.println(<span class="string">"Received message is :"</span>+<span class="keyword">new</span> String(bytes));</span><br><span class="line">            <span class="keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        consumer.start();</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>è¿è¡Œç»“æœ</code></p><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210424160449032.png" alt="provider"></p><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210424160457858.png" alt="consumer"></p><h2 id="å‘½ä»¤è¡¥å……"><a href="#å‘½ä»¤è¡¥å……" class="headerlink" title="å‘½ä»¤è¡¥å……"></a>å‘½ä»¤è¡¥å……</h2><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210423213544561.png" alt="å‘½ä»¤"></p>]]></content>
      
      
      
        <tags>
            
            <tag> rocketMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaä¸­ä½¿ç”¨SPI</title>
      <link href="2021/04/19/java-zhong-shi-yong-spi/"/>
      <url>2021/04/19/java-zhong-shi-yong-spi/</url>
      
        <content type="html"><![CDATA[<h1 id="SPIï¼ˆæµ…è°ˆä½¿ç”¨ï¼‰"><a href="#SPIï¼ˆæµ…è°ˆä½¿ç”¨ï¼‰" class="headerlink" title="SPIï¼ˆæµ…è°ˆä½¿ç”¨ï¼‰"></a>SPIï¼ˆæµ…è°ˆä½¿ç”¨ï¼‰</h1><span id="more"></span><h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="1-1-ç›®å½•ç»“æ„"><a href="#1-1-ç›®å½•ç»“æ„" class="headerlink" title="1.1 ç›®å½•ç»“æ„"></a>1.1 ç›®å½•ç»“æ„</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419222403881.png" alt="ç›®å½•ç»“æ„"></p><h3 id="2-2-å„ä¸ªæ–‡ä»¶"><a href="#2-2-å„ä¸ªæ–‡ä»¶" class="headerlink" title="2.2 å„ä¸ªæ–‡ä»¶"></a>2.2 å„ä¸ªæ–‡ä»¶</h3><p><code>Pay.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 10:15 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Pay</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><code>AliPay.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>service<span class="token punctuation">.</span>Pay<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 10:16 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AliPay</span> <span class="token keyword">implements</span> <span class="token class-name">Pay</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"this AliPay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><code>WeChatPay.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>impl<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>service<span class="token punctuation">.</span>Pay<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 10:17 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeChatPay</span> <span class="token keyword">implements</span> <span class="token class-name">Pay</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"this is WeChatPay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><code>Main.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>service<span class="token punctuation">.</span>Pay<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Iterator<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ServiceLoader<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 10:19 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ServiceLoader<span class="token operator">&lt;</span>Pay<span class="token operator">></span> load <span class="token operator">=</span> ServiceLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>Pay<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Pay next <span class="token operator">:</span> load<span class="token punctuation">)</span> <span class="token punctuation">{</span>            next<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="2-3-è¾“å‡ºç»“æœ"><a href="#2-3-è¾“å‡ºç»“æœ" class="headerlink" title="2.3 è¾“å‡ºç»“æœ"></a>2.3 è¾“å‡ºç»“æœ</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419222551091.png" alt="è¾“å‡ºç»“æœ"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote><p>ç²—ç•¥åœ°ä½¿ç”¨ï¼Œå±‚æ¬¡è¿˜å¾ˆä½ï¼Œå…ˆè®°å½•ä¸€ä¸‹å§ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ç†è§£é€æµ‹ï¼Œä»¥åå†æ›´æ–°ï¼Œå“ˆå“ˆå“ˆå“ˆğŸ˜‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> SPI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapStructçš„ä½¿ç”¨</title>
      <link href="2021/04/19/mapstruct-de-shi-yong/"/>
      <url>2021/04/19/mapstruct-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="è¶…çº§å¤§å‘-mapStruct"><a href="#è¶…çº§å¤§å‘-mapStruct" class="headerlink" title="è¶…çº§å¤§å‘ mapStruct"></a>è¶…çº§å¤§å‘ mapStruct</h1><span id="more"></span><h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="1-1-pom-é…ç½®ï¼ˆidea-2020"><a href="#1-1-pom-é…ç½®ï¼ˆidea-2020" class="headerlink" title="1.1 pom é…ç½®ï¼ˆidea 2020)"></a>1.1 pom é…ç½®ï¼ˆidea 2020)</h3><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--       mapStruct--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>æ€»ç»“ï¼š idea 2020 å°±ç…§æˆ‘è¿™ä¹ˆç”¨ï¼Œä¸ç„¶ä½ æ”¾å¿ƒï¼Œç»å¯¹æœ‰bugï¼Œè®©ä½ çˆ½é£å¤©ï¼Œå®ƒä¼šå’Œ <code>lombok</code>å†²çªã€‚</p><h3 id="2-2-è‡ªå®šä¹‰converter"><a href="#2-2-è‡ªå®šä¹‰converter" class="headerlink" title="2.2 è‡ªå®šä¹‰converter"></a>2.2 è‡ªå®šä¹‰converter</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zxh.tkmapper.converter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zxh.tkmapper.dto.AdminDTO;</span><br><span class="line"><span class="keyword">import</span> com.zxh.tkmapper.model.Admin;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapping;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mappings;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.factory.Mappers;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: AmberZxh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@DateTime</span>: 2021/4/19 8:28 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper(componentModel = "spring")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyConverter</span> </span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mappings({</span></span><br><span class="line"><span class="meta">            @Mapping(source = "id",target = "id"),</span></span><br><span class="line"><span class="meta">            @Mapping(source = "username",target = "name"),</span></span><br><span class="line"><span class="meta">            @Mapping(source = "password",target = "pwd"),</span></span><br><span class="line"><span class="meta">            @Mapping(source = "addTime",target = "avatar")</span></span><br><span class="line"><span class="meta">    })</span></span><br><span class="line"></span><br><span class="line">    <span class="function">AdminDTO <span class="title">admin2AdminDTO</span><span class="params">(Admin admin)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ç…§ç€ä¸€æ‘¸ä¸€æ ·å†™å°±è¡Œäº†ã€‚æ²¡æœ‰ä¸€ä¸ªåœ°æ–¹æ˜¯å¯ä»¥çœç•¥çš„</p><h3 id="3-3-æµ‹è¯•ç”¨ä¾‹"><a href="#3-3-æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="3.3 æµ‹è¯•ç”¨ä¾‹"></a>3.3 æµ‹è¯•ç”¨ä¾‹</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zxh.tkmapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zxh.tkmapper.converter.MyConverter;</span><br><span class="line"><span class="keyword">import</span> com.zxh.tkmapper.dto.AdminDTO;</span><br><span class="line"><span class="keyword">import</span> com.zxh.tkmapper.mapper.AdminMapper;</span><br><span class="line"><span class="keyword">import</span> com.zxh.tkmapper.model.Admin;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.entity.Example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>: AmberZxh</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@DateTime</span>: 2021/4/19 7:53 ä¸‹åˆ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mytest</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AdminMapper adminMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyConverter converter;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>{</span><br><span class="line">        Example example = <span class="keyword">new</span> Example(Admin.class);</span><br><span class="line">        Example.Criteria criteria = example.createCriteria();</span><br><span class="line">        criteria.andEqualTo(<span class="string">"username"</span>,<span class="string">"admin123"</span>);</span><br><span class="line">        List&lt;Admin&gt; admins = adminMapper.selectByExample(example);</span><br><span class="line">        Admin admin = admins.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        AdminDTO adminDTO = converter.admin2AdminDTO(admin);</span><br><span class="line">        System.out.println(adminDTO);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œç»“æœï¼ˆæˆåŠŸï¼‰</p><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419220926282.png" alt="è¿è¡Œç»“æœ"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>ä¸¤ä¸ªå­—ï¼Œåƒåœ¾ã€‚åƒåœ¾è¯´çš„æ˜¯å®˜æ–¹æ–‡æ¡£åƒåœ¾ï¼Œç¤¾åŒºæ´»è·ƒåƒåœ¾ï¼Œæ€§èƒ½å¾ˆå¥½æ²¡è¯è¯´ï¼Œä¹ŸæŒºå®ç”¨çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å¤šå°‘äººå»ç”¨å“ˆã€‚å°±é…±ç´«ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> ä¸­é—´ä»¶ </tag>
            
            <tag> MapStruct </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tkMapperçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2021/04/19/tkmapper-de-ji-ben-shi-yong/"/>
      <url>2021/04/19/tkmapper-de-ji-ben-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="tkMapper-å­¦ä¹ ï¼ˆæ„Ÿè§‰æ²¡å•¥åŠç”¨ï¼‰"><a href="#tkMapper-å­¦ä¹ ï¼ˆæ„Ÿè§‰æ²¡å•¥åŠç”¨ï¼‰" class="headerlink" title="tkMapper å­¦ä¹ ï¼ˆæ„Ÿè§‰æ²¡å•¥åŠç”¨ï¼‰"></a>tkMapper å­¦ä¹ ï¼ˆæ„Ÿè§‰æ²¡å•¥åŠç”¨ï¼‰</h2><span id="more"></span><h2 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h2><h3 id="1-1-å¯¼å…¥ä¾èµ–"><a href="#1-1-å¯¼å…¥ä¾èµ–" class="headerlink" title="1.1 å¯¼å…¥ä¾èµ–"></a>1.1 å¯¼å…¥ä¾èµ–</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419200330429.png" alt="ä¾èµ–"></p><h3 id="2-2-é…ç½®æ–‡ä»¶"><a href="#2-2-é…ç½®æ–‡ä»¶" class="headerlink" title="2.2 é…ç½®æ–‡ä»¶"></a>2.2 é…ç½®æ–‡ä»¶</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419200411354.png" alt="é…ç½®æ–‡ä»¶"></p><h3 id="3-3-åŸºæœ¬æ–‡ä»¶"><a href="#3-3-åŸºæœ¬æ–‡ä»¶" class="headerlink" title="3.3 åŸºæœ¬æ–‡ä»¶"></a>3.3 åŸºæœ¬æ–‡ä»¶</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419200456010.png" alt="åŸºæœ¬æ–‡ä»¶"></p><p><code>AdminMapper.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>tkmapper<span class="token punctuation">.</span>mapper<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>tkmapper<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Admin<span class="token punctuation">;</span><span class="token keyword">import</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>common<span class="token punctuation">.</span>Mapper<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 7:52 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AdminMapper</span> <span class="token keyword">extends</span> <span class="token class-name">Mapper</span><span class="token operator">&lt;</span>Admin<span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><p><code>Admin.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>tkmapper<span class="token punctuation">.</span>model<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span>Table<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 7:54 ä¸‹åˆ * @description: */</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"cskaoyanmall_admin"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Admin</span> <span class="token punctuation">{</span>    Integer id<span class="token punctuation">;</span>    String username<span class="token punctuation">;</span>    String password<span class="token punctuation">;</span>    String lastLoginIp<span class="token punctuation">;</span>    String lastLoginTime<span class="token punctuation">;</span>    String avatar<span class="token punctuation">;</span>    Date updateTime<span class="token punctuation">;</span>    Date addTime<span class="token punctuation">;</span>    Boolean deleted<span class="token punctuation">;</span>    String roleIds<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="3-4-æµ‹è¯•ç±»"><a href="#3-4-æµ‹è¯•ç±»" class="headerlink" title="3.4 æµ‹è¯•ç±»"></a>3.4 æµ‹è¯•ç±»</h3><p><code>MyTest.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>tkmapper<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>tkmapper<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>AdminMapper<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>tkmapper<span class="token punctuation">.</span>model<span class="token punctuation">.</span>Admin<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>SpringBootTest<span class="token punctuation">;</span><span class="token keyword">import</span> tk<span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>Example<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/19 7:53 ä¸‹åˆ * @description: */</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mytest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    AdminMapper adminMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Example example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Example</span><span class="token punctuation">(</span>Admin<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Example<span class="token punctuation">.</span>Criteria criteria <span class="token operator">=</span> example<span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        criteria<span class="token punctuation">.</span><span class="token function">andEqualTo</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>Admin<span class="token operator">></span> admins <span class="token operator">=</span> adminMapper<span class="token punctuation">.</span><span class="token function">selectByExample</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">;</span>        admins<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="3-5-è¿è¡Œæˆªå›¾"><a href="#3-5-è¿è¡Œæˆªå›¾" class="headerlink" title="3.5 è¿è¡Œæˆªå›¾"></a>3.5 è¿è¡Œæˆªå›¾</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419200704687.png" alt="è¿è¡Œæˆªå›¾"></p><h3 id="3-6-æ³¨æ„äº‹é¡¹"><a href="#3-6-æ³¨æ„äº‹é¡¹" class="headerlink" title="3.6 æ³¨æ„äº‹é¡¹"></a>3.6 æ³¨æ„äº‹é¡¹</h3><blockquote><p>è®°å¾—è¿›è¡Œå…¨å±€çš„åŒ…æ‰«æï¼Œç”¨çš„æ˜¯ <code>tkmapper</code> åŒ… ä¸‹çš„ï¼Œå°±è¿™ä¹ˆä¸€ç‚¹å§</p></blockquote><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419200912158.png" alt="æ³¨æ„äº‹é¡¹"></p><h2 id="ä½¿ç”¨-MybaitsCodeHelper-è‡ªåŠ¨ç”Ÿæˆ-tkMapper"><a href="#ä½¿ç”¨-MybaitsCodeHelper-è‡ªåŠ¨ç”Ÿæˆ-tkMapper" class="headerlink" title="ä½¿ç”¨ MybaitsCodeHelper è‡ªåŠ¨ç”Ÿæˆ tkMapper"></a>ä½¿ç”¨ MybaitsCodeHelper è‡ªåŠ¨ç”Ÿæˆ tkMapper</h2><h3 id="2-1-è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®"><a href="#2-1-è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®" class="headerlink" title="2.1 è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®"></a>2.1 è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419201247556.png" alt="è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®"></p><h3 id="2-3-è‡ªåŠ¨ç”Ÿæˆç»“æœ"><a href="#2-3-è‡ªåŠ¨ç”Ÿæˆç»“æœ" class="headerlink" title="2.3 è‡ªåŠ¨ç”Ÿæˆç»“æœ"></a>2.3 è‡ªåŠ¨ç”Ÿæˆç»“æœ</h3><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419201421825.png" alt="è‡ªåŠ¨ç”Ÿæˆç»“æœ"></p><h3 id="3-3-æ€»ç»“"><a href="#3-3-æ€»ç»“" class="headerlink" title="3.3 æ€»ç»“"></a>3.3 æ€»ç»“</h3><blockquote><p>ç”±æ­¤å¯è§ï¼Œæ­¤æ’ä»¶æ˜¯å¤šä¹ˆçš„å‰å®³ï¼Œèƒ½è‡ªåŠ¨ç”Ÿæˆï¼Œä½ è¿˜æ‰‹å†™ï¼Ÿå·¥å…·äººå½“å¾—è¿˜ä¸å¤Ÿå¤šï¼Ÿ</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> ä¸­é—´ä»¶ </tag>
            
            <tag> tkmapper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typoraæ•´åˆPicoGo</title>
      <link href="2021/04/19/tu-chuang-ce-shi/"/>
      <url>2021/04/19/tu-chuang-ce-shi/</url>
      
        <content type="html"><![CDATA[<p>Typora ä½¿ç”¨å›¾åºŠ</p><span id="more"></span><h2 id="è®¾ç½®PicGo"><a href="#è®¾ç½®PicGo" class="headerlink" title="è®¾ç½®PicGo"></a>è®¾ç½®PicGo</h2><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419111506617.png" alt="picgoè®¾ç½®"></p><h2 id="è®¾ç½®Typora"><a href="#è®¾ç½®Typora" class="headerlink" title="è®¾ç½®Typora"></a>è®¾ç½®Typora</h2><p><img src="https://zxhblog.oss-cn-hangzhou.aliyuncs.com/img/image-20210419111614904.png" alt="typoraè®¾ç½®"></p>]]></content>
      
      
      
        <tags>
            
            <tag> picgo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeper</title>
      <link href="2021/04/19/zookeeper/"/>
      <url>2021/04/19/zookeeper/</url>
      
        <content type="html"><![CDATA[<p>è®¤çœŸæ•´ç†çš„zookeeperï¼Œ</p><span id="more"></span><h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><p><img src="/2021/04/19/zookeeper/image-20210223154848739-8797079.png"></p><h2 id="1-ZKç®€ä»‹"><a href="#1-ZKç®€ä»‹" class="headerlink" title="1. ZKç®€ä»‹"></a>1. ZKç®€ä»‹</h2><ul><li>dubboæ¡†æ¶ springcloud æ¡†æ¶      zk  æ³¨å†Œä¸­å¿ƒ    AService     BService</li><li>Hadoop Hbase ç»„ä»¶   é›†ç¾¤æ¶æ„   zk  é›†ç¾¤ç®¡ç†è€… </li><li>zkå®ç°åˆ†å¸ƒå¼é”  redisåˆ†å¸ƒå¼</li></ul><blockquote><p>ZooKeeper(åŠ¨ç‰©å›­ç®¡ç†è€…) ç®€ç§° <strong>ZK</strong>ï¼Œ<strong>ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼Œå¼€æ”¾æºç çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡</strong>ï¼Œæ˜¯Googleçš„Chubbyä¸€ä¸ªå¼€æºçš„å®ç°ï¼Œæ˜¯Hadoopå’ŒHbaseçš„é‡è¦ç»„ä»¶ã€‚ZooKeeper ä½¿ç”¨ Java æ‰€ç¼–å†™ï¼Œä½†æ˜¯æ”¯æŒ Java å’Œ C ä¸¤ç§ç¼–ç¨‹è¯­è¨€ã€‚</p></blockquote><hr><h2 id="2-ZKå†…å­˜æ•°æ®æ¨¡å‹"><a href="#2-ZKå†…å­˜æ•°æ®æ¨¡å‹" class="headerlink" title="2. ZKå†…å­˜æ•°æ®æ¨¡å‹"></a>2. ZKå†…å­˜æ•°æ®æ¨¡å‹</h2><h3 id="2-1-æ¨¡å‹ç»“æ„"><a href="#2-1-æ¨¡å‹ç»“æ„" class="headerlink" title="2.1 æ¨¡å‹ç»“æ„"></a>2.1 æ¨¡å‹ç»“æ„</h3><p><img src="/2021/04/19/zookeeper/image-20210223173257910-8797079.png"></p><h3 id="2-2-æ¨¡å‹çš„ç‰¹ç‚¹"><a href="#2-2-æ¨¡å‹çš„ç‰¹ç‚¹" class="headerlink" title="2.2 æ¨¡å‹çš„ç‰¹ç‚¹"></a>2.2 æ¨¡å‹çš„ç‰¹ç‚¹</h3><ul><li>æ¯ä¸ªå­ç›®å½•å¦‚/node1éƒ½è¢«ç§°ä½œä¸€ä¸ªznode(èŠ‚ç‚¹)ã€‚è¿™ä¸ª znode æ˜¯è¢«å®ƒæ‰€åœ¨çš„è·¯å¾„å”¯ä¸€æ ‡è¯†</li><li>znode å¯ä»¥æœ‰å­èŠ‚ç‚¹ç›®å½•ï¼Œå¹¶ä¸”æ¯ä¸ª znode å¯ä»¥å­˜å‚¨æ•°æ®</li><li>znode æ˜¯æœ‰ç‰ˆæœ¬çš„ï¼Œæ¯ä¸ª znode ä¸­å­˜å‚¨çš„æ•°æ®å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè®¿é—®è·¯å¾„ä¸­å¯ä»¥å­˜å‚¨å¤šä»½æ•°æ®</li><li>znode å¯ä»¥è¢«ç›‘æ§ï¼ŒåŒ…æ‹¬è¿™ä¸ªç›®å½•èŠ‚ç‚¹ä¸­å­˜å‚¨çš„æ•°æ®çš„ä¿®æ”¹ï¼Œå­èŠ‚ç‚¹ç›®å½•çš„å˜åŒ–ç­‰ï¼Œä¸€æ—¦å˜åŒ–å¯ä»¥é€šçŸ¥è®¾ç½®ç›‘æ§çš„å®¢æˆ·ç«¯</li></ul><hr><h2 id="3-èŠ‚ç‚¹çš„åˆ†ç±»"><a href="#3-èŠ‚ç‚¹çš„åˆ†ç±»" class="headerlink" title="3. èŠ‚ç‚¹çš„åˆ†ç±»"></a>3. èŠ‚ç‚¹çš„åˆ†ç±»</h2><h4 id="3-1-æŒä¹…èŠ‚ç‚¹ï¼ˆPERSISTENTï¼‰"><a href="#3-1-æŒä¹…èŠ‚ç‚¹ï¼ˆPERSISTENTï¼‰" class="headerlink" title="3.1 æŒä¹…èŠ‚ç‚¹ï¼ˆPERSISTENTï¼‰"></a>3.1 æŒä¹…èŠ‚ç‚¹ï¼ˆPERSISTENTï¼‰</h4><blockquote><p>&nbsp;&nbsp;æ˜¯æŒ‡åœ¨èŠ‚ç‚¹åˆ›å»ºåï¼Œå°±ä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°æœ‰åˆ é™¤æ“ä½œæ¥ä¸»åŠ¨åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹â€”â€”ä¸ä¼šå› ä¸ºåˆ›å»ºè¯¥èŠ‚ç‚¹çš„å®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆè€Œæ¶ˆå¤±</p></blockquote><h4 id="3-2-æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ˆPERSISTENT-SEQUENTIALï¼‰"><a href="#3-2-æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ˆPERSISTENT-SEQUENTIALï¼‰" class="headerlink" title="3.2 æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ˆPERSISTENT_SEQUENTIALï¼‰"></a>3.2 æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ˆPERSISTENT_SEQUENTIALï¼‰</h4><blockquote><p>è¿™ç±»èŠ‚ç‚¹çš„åŸºæœ¬ç‰¹æ€§å’Œä¸Šé¢çš„èŠ‚ç‚¹ç±»å‹æ˜¯ä¸€è‡´çš„ã€‚é¢å¤–çš„ç‰¹æ€§æ˜¯ï¼Œåœ¨ZKä¸­ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹ä¼šä¸ºä»–çš„ç¬¬ä¸€çº§å­èŠ‚ç‚¹ç»´æŠ¤ä¸€ä»½æ—¶åºï¼Œä¼šè®°å½•æ¯ä¸ªå­èŠ‚ç‚¹åˆ›å»ºçš„å…ˆåé¡ºåºã€‚åŸºäºè¿™ä¸ªç‰¹æ€§ï¼Œåœ¨åˆ›å»ºå­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¯ä»¥è®¾ç½®è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºèŠ‚ç‚¹è¿‡ç¨‹ä¸­ï¼ŒZKä¼šè‡ªåŠ¨ä¸ºç»™å®šèŠ‚ç‚¹ååŠ ä¸Šä¸€ä¸ªæ•°å­—åç¼€ï¼Œä½œä¸ºæ–°çš„èŠ‚ç‚¹åã€‚è¿™ä¸ªæ•°å­—åç¼€çš„èŒƒå›´æ˜¯æ•´å‹çš„æœ€å¤§å€¼ã€‚</p></blockquote><h4 id="3-3-ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰"><a href="#3-3-ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰" class="headerlink" title="3.3 ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰"></a>3.3 ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰</h4><blockquote><p>å’ŒæŒä¹…èŠ‚ç‚¹ä¸åŒçš„æ˜¯ï¼Œä¸´æ—¶èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸå’Œå®¢æˆ·ç«¯ä¼šè¯ç»‘å®šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¼šè¯å¤±æ•ˆï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä¼šè‡ªåŠ¨è¢«æ¸…é™¤æ‰ã€‚æ³¨æ„ï¼Œè¿™é‡Œæåˆ°çš„æ˜¯ä¼šè¯å¤±æ•ˆï¼Œè€Œéè¿æ¥æ–­å¼€ã€‚å¦å¤–ï¼Œåœ¨ä¸´æ—¶èŠ‚ç‚¹ä¸‹é¢ä¸èƒ½åˆ›å»ºå­èŠ‚ç‚¹ã€‚&nbsp;</p></blockquote><h4 id="3-4-ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ˆEPHEMERAL-SEQUENTIALï¼‰"><a href="#3-4-ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ˆEPHEMERAL-SEQUENTIALï¼‰" class="headerlink" title="3.4 ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ˆEPHEMERAL_SEQUENTIALï¼‰"></a>3.4 ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ˆEPHEMERAL_SEQUENTIALï¼‰</h4><blockquote><p>å…·æœ‰ä¸´æ—¶èŠ‚ç‚¹ç‰¹ç‚¹,é¢å¤–çš„ç‰¹æ€§æ˜¯ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹ä¼šä¸ºä»–çš„ç¬¬ä¸€çº§å­èŠ‚ç‚¹ç»´æŠ¤ä¸€ä»½æ—¶åºã€‚è¿™ç‚¹å’Œåˆšæ‰æåˆ°çš„æŒä¹…é¡ºåºèŠ‚ç‚¹ç±»ä¼¼</p></blockquote><hr><h2 id="4-å®‰è£…"><a href="#4-å®‰è£…" class="headerlink" title="4. å®‰è£…"></a>4. å®‰è£…</h2><h3 id="4-1-linuxç³»ç»Ÿå®‰è£…"><a href="#4-1-linuxç³»ç»Ÿå®‰è£…" class="headerlink" title="4.1 linuxç³»ç»Ÿå®‰è£…"></a>4.1 linuxç³»ç»Ÿå®‰è£…</h3><pre class=" language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> 1.å®‰è£…jdkå¹¶é…ç½®ç¯å¢ƒå˜é‡ &amp; ä¸‹è½½zkå®‰è£…åŒ…</span><span class="token list punctuation">-</span>    https://mirrors.bfsu.edu.cn/apache/zookeeper-3.6.2/apache-zookeeper-3.6.2-bin.tar.gz<span class="token title important"><span class="token punctuation">#</span> 2.ä¸‹è½½å®‰è£…åŒ…ä¸Šä¼ åˆ°linuxæœåŠ¡ä¸­,å¹¶è§£å‹ç¼©</span><span class="token list punctuation">-</span>    tar -zxvf zookeeper-3.4.12.tar.gz<span class="token title important"><span class="token punctuation">#</span> 3.é‡å‘½åå®‰è£…ç›®å½•</span><span class="token list punctuation">-</span>    mv zookeeper-3.4.12 zk<span class="token title important"><span class="token punctuation">#</span> 4.é…ç½®zoo.cfgé…ç½®æ–‡ä»¶</span><span class="token list punctuation">-</span>    1.ä¿®æ”¹zkçš„confç›®å½•ä¸‹çš„zoo_simple.cfgï¼Œä¿®æ”¹å®Œåï¼Œé‡å‘½åä¸ºzoo.cfg  tickTime=2000  initLimit=10  syncLimit=5  dataDir=/usr/zkdata  clientPort=2181<span class="token title important"><span class="token punctuation">#</span> 5.å¯åŠ¨zk</span><span class="token list punctuation">-</span>    åœ¨zkçš„binç›®å½•ä¸‹ï¼Œè¿è¡ŒzkServer.sh<span class="token code keyword">    ./bin/zkServer.sh start /usr/conf/zoo.cfg</span>    <span class="token title important"><span class="token punctuation">#</span> 6.ä½¿ç”¨jpsæŸ¥çœ‹å¯åŠ¨æ˜¯å¦æˆåŠŸ</span><span class="token title important"><span class="token punctuation">#</span> 7.å¯åŠ¨å®¢æˆ·ç«¯è¿æ¥åˆ°zk</span><span class="token list punctuation">-</span> ./bin/zkCli.sh -server 192.168.0.220:2181<span class="token code keyword">    æ³¨æ„:å¯ä»¥é€šè¿‡&amp;nbsp;&amp;nbsp;./bin/zkCli.sh&amp;nbsp;help&amp;nbsp;æŸ¥çœ‹å®¢æˆ·ç«¯æ‰€æœ‰å¯ä»¥æ‰§è¡Œçš„æŒ‡ä»¤</span></code></pre><h3 id="4-2-Dockerå®‰è£…zookeeper"><a href="#4-2-Dockerå®‰è£…zookeeper" class="headerlink" title="4.2 Dockerå®‰è£…zookeeper"></a>4.2 Dockerå®‰è£…zookeeper</h3><pre class=" language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> 1.è·å–zkçš„é•œåƒ</span><span class="token list punctuation">-</span> docker pull zookeeper:3.4.14<span class="token title important"><span class="token punctuation">#</span> 2.å¯åŠ¨zkæœåŠ¡</span><span class="token list punctuation">-</span> docker run --name zk -p 2181:2181 -d zookeeper:3.4.14</code></pre><hr><h2 id="5-å®¢æˆ·ç«¯åŸºæœ¬æŒ‡ä»¤"><a href="#5-å®¢æˆ·ç«¯åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="5.å®¢æˆ·ç«¯åŸºæœ¬æŒ‡ä»¤"></a>5.å®¢æˆ·ç«¯åŸºæœ¬æŒ‡ä»¤</h2><pre class=" language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> 1.ls path&amp;nbsp;                               æŸ¥çœ‹ç‰¹å®šèŠ‚ç‚¹ä¸‹é¢çš„å­èŠ‚ç‚¹</span><span class="token title important"><span class="token punctuation">#</span> 2.create path data &amp;nbsp;             åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ã€‚å¹¶ç»™èŠ‚ç‚¹ç»‘å®šæ•°æ®(é»˜è®¤æ˜¯æŒä¹…æ€§èŠ‚ç‚¹)</span>  <span class="token list punctuation">-</span> create path data                                  åˆ›å»ºæŒä¹…èŠ‚ç‚¹(é»˜è®¤æ˜¯æŒä¹…èŠ‚ç‚¹)  <span class="token list punctuation">-</span> create -s path data                           åˆ›å»ºæŒä¹…æ€§é¡ºåºèŠ‚ç‚¹  <span class="token list punctuation">-</span>    create -e<span class="token entity" title="&nbsp;">&amp;nbsp;</span>path data<span class="token entity" title="&nbsp;">&amp;nbsp;</span>                          åˆ›å»ºä¸´æ—¶æ€§èŠ‚ç‚¹(æ³¨æ„:ä¸´æ—¶èŠ‚ç‚¹ä¸èƒ½å«æœ‰ä»»ä½•å­èŠ‚ç‚¹)  <span class="token list punctuation">-</span>    create -e -s path<span class="token entity" title="&nbsp;">&amp;nbsp;</span>data            åˆ›å»ºä¸´æ—¶é¡ºåºèŠ‚ç‚¹(æ³¨æ„:ä¸´æ—¶èŠ‚ç‚¹ä¸èƒ½å«æœ‰ä»»ä½•å­èŠ‚ç‚¹) <span class="token title important"><span class="token punctuation">#</span> 3.stat path                æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</span><span class="token title important"><span class="token punctuation">#</span> 4.set path data            ä¿®æ”¹èŠ‚ç‚¹æ•°æ®</span><span class="token title important"><span class="token punctuation">#</span> 5.ls2 path                 æŸ¥çœ‹èŠ‚ç‚¹ä¸‹å­©å­å’Œå½“å‰èŠ‚ç‚¹çš„çŠ¶æ€</span><span class="token title important"><span class="token punctuation">#</span> 6.history                  æŸ¥çœ‹æ“ä½œå†å²</span><span class="token title important"><span class="token punctuation">#</span> 7.get path                 è·å¾—èŠ‚ç‚¹ä¸Šç»‘å®šçš„æ•°æ®ä¿¡æ¯</span><span class="token title important"><span class="token punctuation">#</span> 8.delete path              åˆ é™¤èŠ‚ç‚¹(æ³¨æ„:åˆ é™¤èŠ‚ç‚¹ä¸èƒ½å«æœ‰å­èŠ‚ç‚¹)</span><span class="token title important"><span class="token punctuation">#</span> 9.rmr  path                é€’å½’åˆ é™¤èŠ‚ç‚¹(æ³¨æ„:ä¼šå°†å½“å‰èŠ‚ç‚¹ä¸‹æ‰€æœ‰èŠ‚ç‚¹åˆ é™¤)</span><span class="token title important"><span class="token punctuation">#</span> 10.quit                    é€€å‡ºå½“å‰ä¼šè¯(ä¼šè¯å¤±æ•ˆ)</span></code></pre><hr><h2 id="6-èŠ‚ç‚¹ç›‘å¬æœºåˆ¶-watch"><a href="#6-èŠ‚ç‚¹ç›‘å¬æœºåˆ¶-watch" class="headerlink" title="6.èŠ‚ç‚¹ç›‘å¬æœºåˆ¶ watch"></a>6.èŠ‚ç‚¹ç›‘å¬æœºåˆ¶ watch</h2><blockquote><p>å®¢æˆ·ç«¯å¯ä»¥ç›‘æµ‹znodeèŠ‚ç‚¹çš„å˜åŒ–ã€‚ZonodeèŠ‚ç‚¹çš„å˜åŒ–è§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼Œç„¶åæ¸…é™¤å¯¹è¯¥èŠ‚ç‚¹çš„ç›‘æµ‹ã€‚å½“ç›‘æµ‹ä¸€ä¸ªznodeèŠ‚ç‚¹æ—¶å€™ï¼ŒZookeeperä¼šå‘é€é€šçŸ¥ç»™ç›‘æµ‹èŠ‚ç‚¹ã€‚<strong>ä¸€ä¸ªWatchäº‹ä»¶æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„è§¦å‘å™¨ï¼Œå½“è¢«è®¾ç½®äº†Watchçš„æ•°æ®å’Œç›®å½•å‘ç”Ÿäº†æ”¹å˜çš„æ—¶å€™,åˆ™æœåŠ¡å™¨å°†è¿™ä¸ªæ”¹å˜å‘é€ç»™è®¾ç½®äº†Watchçš„å®¢æˆ·ç«¯ä»¥ä¾¿é€šçŸ¥å®ƒä»¬ã€‚</strong></p></blockquote><pre class=" language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> 1.ls /path true             ç›‘å¬èŠ‚ç‚¹ç›®å½•çš„å˜åŒ–</span><span class="token title important"><span class="token punctuation">#</span> 2.get /path true                        ç›‘å¬èŠ‚ç‚¹æ•°æ®çš„å˜åŒ–ã€‚   </span></code></pre><h2 id="7-javaæ“ä½œZK"><a href="#7-javaæ“ä½œZK" class="headerlink" title="7.javaæ“ä½œZK"></a>7.javaæ“ä½œZK</h2><h3 id="7-1-åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–"><a href="#7-1-åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–" class="headerlink" title="7.1 åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–"></a>7.1 åˆ›å»ºé¡¹ç›®å¼•å…¥ä¾èµ–</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.101tec<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>zkclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>0.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h3 id="7-2-è·å–zkå®¢æˆ·ç«¯å¯¹è±¡"><a href="#7-2-è·å–zkå®¢æˆ·ç«¯å¯¹è±¡" class="headerlink" title="7.2 è·å–zkå®¢æˆ·ç«¯å¯¹è±¡"></a>7.2 è·å–zkå®¢æˆ·ç«¯å¯¹è±¡</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> ZkClient zkClient<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * è·å–zkå®¢æˆ·ç«¯è¿æ¥ */</span><span class="token annotation punctuation">@Before</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//å‚æ•°1:æœåŠ¡å™¨çš„ipå’Œç«¯å£</span>    <span class="token comment" spellcheck="true">//å‚æ•°2:ä¼šè¯çš„è¶…æ—¶æ—¶é—´</span>    <span class="token comment" spellcheck="true">//å‚æ•°3:å›è¯çš„è¿æ¥æ—¶é—´</span>    <span class="token comment" spellcheck="true">//å‚æ•°4:åºåˆ—åŒ–æ–¹å¼</span>    zkClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZkClient</span><span class="token punctuation">(</span><span class="token string">"192.168.28.132:2181"</span><span class="token punctuation">,</span><span class="token number">30000</span><span class="token punctuation">,</span><span class="token number">60000</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">SerializableSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * å…³é—­èµ„æº */</span><span class="token annotation punctuation">@After</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    zkClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="7-3-å¸¸ç”¨API"><a href="#7-3-å¸¸ç”¨API" class="headerlink" title="7.3 å¸¸ç”¨API"></a>7.3 å¸¸ç”¨API</h3><ul><li>åˆ›å»ºèŠ‚ç‚¹</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * åˆ›å»ºèŠ‚ç‚¹ */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//ç¬¬ä¸€ä¸­åˆ›å»ºæ–¹å¼  è¿”å›åˆ›å»ºèŠ‚ç‚¹çš„åç§°</span>    String nodeName <span class="token operator">=</span> zkClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"/node5"</span><span class="token punctuation">,</span><span class="token string">"lisi"</span><span class="token punctuation">,</span> CreateMode<span class="token punctuation">.</span>PERSISTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>    zkClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"/node6"</span><span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> CreateMode<span class="token punctuation">.</span>PERSISTENT_SEQUENTIAL<span class="token punctuation">)</span><span class="token punctuation">;</span>    zkClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"/node7"</span><span class="token punctuation">,</span><span class="token string">"ç‹äº”"</span><span class="token punctuation">,</span>CreateMode<span class="token punctuation">.</span>EPHEMERAL<span class="token punctuation">)</span><span class="token punctuation">;</span>    zkClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"/node8"</span><span class="token punctuation">,</span><span class="token string">"xiaozhang"</span><span class="token punctuation">,</span>CreateMode<span class="token punctuation">.</span>EPHEMERAL_SEQUENTIAL<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ç¬¬äºŒç§åˆ›å»ºæ–¹å¼ ä¸ä¼šè¿”å›åˆ›å»ºèŠ‚ç‚¹çš„åç§°</span>    zkClient<span class="token punctuation">.</span><span class="token function">createPersistent</span><span class="token punctuation">(</span><span class="token string">"/node1"</span><span class="token punctuation">,</span><span class="token string">"æŒä¹…æ•°æ®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    zkClient<span class="token punctuation">.</span><span class="token function">createPersistentSequential</span><span class="token punctuation">(</span><span class="token string">"/node1/aa"</span><span class="token punctuation">,</span><span class="token string">"æŒä¹…æ•°æ®é¡ºåºèŠ‚ç‚¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    zkClient<span class="token punctuation">.</span><span class="token function">createEphemeral</span><span class="token punctuation">(</span><span class="token string">"/node2"</span><span class="token punctuation">,</span><span class="token string">"ä¸´æ—¶èŠ‚ç‚¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    zkClient<span class="token punctuation">.</span><span class="token function">createEphemeralSequential</span><span class="token punctuation">(</span><span class="token string">"/node1/bb"</span><span class="token punctuation">,</span><span class="token string">"ä¸´æ—¶é¡ºåºèŠ‚ç‚¹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>åˆ é™¤èŠ‚ç‚¹</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * åˆ é™¤èŠ‚ç‚¹ */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//åˆ é™¤æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹  è¿”å›å€¼:æ˜¯å¦åˆ é™¤æˆåŠŸ</span>    <span class="token keyword">boolean</span> delete <span class="token operator">=</span> zkClient<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"/node1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//é€’å½’åˆ é™¤èŠ‚ç‚¹ä¿¡æ¯ è¿”å›å€¼:æ˜¯å¦åˆ é™¤æˆåŠŸ</span>    <span class="token keyword">boolean</span> recursive <span class="token operator">=</span> zkClient<span class="token punctuation">.</span><span class="token function">deleteRecursive</span><span class="token punctuation">(</span><span class="token string">"/node1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>æŸ¥çœ‹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * æŸ¥è¯¢èŠ‚ç‚¹ */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindNodes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//è·å–æŒ‡å®šè·¯å¾„çš„èŠ‚ç‚¹ä¿¡æ¯  //è¿”å›å€¼: ä¸ºå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¿¡æ¯</span>    List<span class="token operator">&lt;</span>String<span class="token operator">></span> children <span class="token operator">=</span> zkClient<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>String child <span class="token operator">:</span> children<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><ul><li>æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„æ•°æ®<ul><li>æ³¨æ„:å¦‚æœå‡ºç°:org.I0Itec.zkclient.exception.ZkMarshallingError: java.io.StreamCorruptedException: invalid stream header: 61616161<br>å¼‚å¸¸çš„åŸå› æ˜¯: åœ¨shellä¸­çš„æ•°æ®åºåˆ—åŒ–æ–¹å¼ å’Œ javaä»£ç ä¸­ä½¿ç”¨çš„åºåˆ—åŒ–æ–¹å¼ä¸ä¸€è‡´å¯¼è‡´  å› æ­¤è¦è§£å†³è¿™ä¸ªé—®é¢˜åªéœ€è¦ä¿è¯åºåˆ—åŒ–ä¸€è‡´å³å¯  éƒ½ä½¿ç”¨ç›¸åŒç«¯æ“ä½œå³å¯</li></ul></li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * è·å–èŠ‚ç‚¹çš„æ•°æ® * */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindNodeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    Object readData <span class="token operator">=</span> zkClient<span class="token punctuation">.</span><span class="token function">readData</span><span class="token punctuation">(</span><span class="token string">"/node3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>readData<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„æ•°æ®å¹¶è·å–çŠ¶æ€ä¿¡æ¯</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * è·å–æ•°æ®ä»¥åŠå½“å‰èŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯ */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindNodeDataAndStat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    Stat stat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Object readData <span class="token operator">=</span> zkClient<span class="token punctuation">.</span><span class="token function">readData</span><span class="token punctuation">(</span><span class="token string">"/node60000000024"</span><span class="token punctuation">,</span>stat<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>readData<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stat<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>ä¿®æ”¹èŠ‚ç‚¹æ•°æ®</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ä¿®æ”¹èŠ‚ç‚¹æ•°æ® */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdateNodeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    zkClient<span class="token punctuation">.</span><span class="token function">writeData</span><span class="token punctuation">(</span><span class="token string">"/node60000000024"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"121"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"xxx"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>ç›‘å¬èŠ‚ç‚¹æ•°æ®çš„å˜åŒ–</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ç›‘å¬èŠ‚ç‚¹æ•°æ®çš„å˜åŒ– */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">testOnNodeDataChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>    zkClient<span class="token punctuation">.</span><span class="token function">subscribeDataChanges</span><span class="token punctuation">(</span><span class="token string">"/node60000000024"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IZkDataListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å½“èŠ‚ç‚¹çš„å€¼åœ¨ä¿®æ”¹æ—¶,ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•  å°†å½“å‰ä¿®æ”¹èŠ‚ç‚¹çš„åå­—,å’ŒèŠ‚ç‚¹å˜åŒ–ä¹‹åçš„æ•°æ®ä¼ é€’ç»™æ–¹æ³•</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDataChange</span><span class="token punctuation">(</span>String nodeName<span class="token punctuation">,</span> Object result<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//å½“èŠ‚ç‚¹çš„å€¼è¢«åˆ é™¤çš„æ—¶å€™,ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•,ä¼šå°†èŠ‚ç‚¹çš„åå­—å·²å‚æ•°å½¢å¼ä¼ é€’ç»™æ–¹æ³•</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDataDeleted</span><span class="token punctuation">(</span>String nodename<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"èŠ‚ç‚¹çš„åå­—:"</span><span class="token operator">+</span>nodename<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//é˜»å¡å®¢æˆ·ç«¯</span>    System<span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><ul><li>ç›‘å¬èŠ‚ç‚¹ç›®å½•çš„å˜åŒ–</li></ul><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ç›‘å¬èŠ‚ç‚¹çš„å˜åŒ– */</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">testOnNodesChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>    zkClient<span class="token punctuation">.</span><span class="token function">subscribeChildChanges</span><span class="token punctuation">(</span><span class="token string">"/node60000000024"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IZkChildListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å½“èŠ‚ç‚¹çš„å‘ç”Ÿå˜åŒ–æ—¶,ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•</span>        <span class="token comment" spellcheck="true">//å‚æ•°1:çˆ¶èŠ‚ç‚¹åç§°</span>        <span class="token comment" spellcheck="true">//å‚æ•°2:çˆ¶èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰å­èŠ‚ç‚¹åç§°</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleChildChange</span><span class="token punctuation">(</span>String nodeName<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>String<span class="token operator">></span> list<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çˆ¶èŠ‚ç‚¹åç§°: "</span><span class="token operator">+</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‘ç”Ÿå˜æ›´åå­—èŠ‚å­©å­èŠ‚ç‚¹åç§°:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>String name <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//é˜»å¡å®¢æˆ·ç«¯</span>    System<span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><hr><h2 id="8-ZKçš„é›†ç¾¤"><a href="#8-ZKçš„é›†ç¾¤" class="headerlink" title="8.ZKçš„é›†ç¾¤"></a>8.ZKçš„é›†ç¾¤</h2><h3 id="8-1é›†ç¾¤-cluster"><a href="#8-1é›†ç¾¤-cluster" class="headerlink" title="8.1é›†ç¾¤(cluster)"></a>8.1é›†ç¾¤(cluster)</h3><pre class=" language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> 1.é›†ç¾¤(cluster)</span><span class="token list punctuation">-</span> é›†åˆåŒä¸€ç§è½¯ä»¶æœåŠ¡çš„å¤šä¸ªèŠ‚ç‚¹åŒæ—¶æä¾›æœåŠ¡<span class="token title important"><span class="token punctuation">#</span> 2.é›†ç¾¤è§£å†³é—®é¢˜</span><span class="token list punctuation">-</span>  å•èŠ‚ç‚¹çš„å¹¶å‘è®¿é—®çš„å‹åŠ›é—®é¢˜<span class="token list punctuation">-</span>  å•èŠ‚ç‚¹æ•…éšœé—®é¢˜(å¦‚ç¡¬ä»¶è€åŒ–,è‡ªç„¶ç¾å®³ç­‰)</code></pre><h3 id="8-2é›†ç¾¤æ¶æ„"><a href="#8-2é›†ç¾¤æ¶æ„" class="headerlink" title="8.2é›†ç¾¤æ¶æ„"></a>8.2é›†ç¾¤æ¶æ„</h3><p><img src="/2021/04/19/zookeeper/image-20210223173230650-8797079.png"></p><h3 id="8-3é›†ç¾¤æ­å»º"><a href="#8-3é›†ç¾¤æ­å»º" class="headerlink" title="8.3é›†ç¾¤æ­å»º"></a>8.3é›†ç¾¤æ­å»º</h3><pre class=" language-java"><code class="language-java"># <span class="token number">1</span><span class="token punctuation">.</span>åˆ›å»ºä¸‰ä¸ªdataDir    <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span>#    mkdir zkdata1 zkdata2 zkdata3# <span class="token number">2</span><span class="token punctuation">.</span>åˆ†åˆ«åœ¨ä¸‰ä¸ªdataDirç›®å½•ä¸‹é¢myidæ–‡ä»¶    <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span>#<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>touch <span class="token punctuation">.</span>/zkdata1<span class="token operator">/</span>myid    <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> myidçš„å†…å®¹æ˜¯ æœåŠ¡å™¨çš„<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> è¡¨ç¤º<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> <span class="token number">1</span><span class="token operator">|</span><span class="token number">2</span><span class="token operator">|</span><span class="token number">3</span># <span class="token number">3</span><span class="token punctuation">.</span>åœ¨<span class="token operator">/</span>confç›®å½•ä¸‹åˆ›å»ºä¸‰ä¸ªzké…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«ä¸º zoo1<span class="token punctuation">.</span>cfg<span class="token punctuation">,</span>zoo2<span class="token punctuation">.</span>cfg<span class="token punctuation">,</span>zoo3<span class="token punctuation">.</span>cfg    <span class="token operator">-</span>    zoo1<span class="token punctuation">.</span>cfg    tickTime<span class="token operator">=</span><span class="token number">2000</span>    initLimit<span class="token operator">=</span><span class="token number">10</span>    syncLimit<span class="token operator">=</span><span class="token number">5</span>    dataDir<span class="token operator">=</span><span class="token operator">/</span>root<span class="token operator">/</span>zkdata1    clientPort<span class="token operator">=</span><span class="token number">3001</span>    server<span class="token number">.1</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">3002</span><span class="token operator">:</span><span class="token number">3003</span>    server<span class="token number">.2</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">4002</span><span class="token operator">:</span><span class="token number">4003</span>    server<span class="token number">.3</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">5002</span><span class="token operator">:</span><span class="token number">5003</span><span class="token operator">-</span> zoo2<span class="token punctuation">.</span>cfg    tickTime<span class="token operator">=</span><span class="token number">2000</span>    initLimit<span class="token operator">=</span><span class="token number">10</span>    syncLimit<span class="token operator">=</span><span class="token number">5</span>    dataDir<span class="token operator">=</span><span class="token operator">/</span>root<span class="token operator">/</span>zkdata2    clientPort<span class="token operator">=</span><span class="token number">4001</span>    server<span class="token number">.1</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">3002</span><span class="token operator">:</span><span class="token number">3003</span>    server<span class="token number">.2</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">4002</span><span class="token operator">:</span><span class="token number">4003</span>    server<span class="token number">.3</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">5002</span><span class="token operator">:</span><span class="token number">5003</span><span class="token operator">-</span> zoo3<span class="token punctuation">.</span>cfg    tickTime<span class="token operator">=</span><span class="token number">2000</span>    initLimit<span class="token operator">=</span><span class="token number">10</span>    syncLimit<span class="token operator">=</span><span class="token number">5</span>    dataDir<span class="token operator">=</span><span class="token operator">/</span>root<span class="token operator">/</span>zkdata3    clientPort<span class="token operator">=</span><span class="token number">5001</span>    server<span class="token number">.1</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">3002</span><span class="token operator">:</span><span class="token number">3003</span>    server<span class="token number">.2</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">4002</span><span class="token operator">:</span><span class="token number">4003</span>    server<span class="token number">.3</span><span class="token operator">=</span><span class="token number">10.15</span><span class="token punctuation">.</span><span class="token number">0.5</span><span class="token operator">:</span><span class="token number">5002</span><span class="token operator">:</span><span class="token number">5003</span>        è§£é‡Š<span class="token operator">:</span>            <span class="token number">1</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span>X <span class="token operator">:</span>xä¸ºæœåŠ¡å™¨çš„å”¯ä¸€æ ‡è¯†ã€‚            <span class="token number">2.192</span><span class="token punctuation">.</span><span class="token number">168.0</span><span class="token punctuation">.</span><span class="token number">220</span>ï¼šæœåŠ¡å™¨æ‰€åœ¨çš„ipåœ°å€            <span class="token number">3.3002</span>ï¼šæ•°æ®åŒæ­¥ä½¿ç”¨çš„ç«¯å£å·            <span class="token number">4.3003</span>ï¼šé€‰ä¸¾ä½¿ç”¨çš„ç«¯å£å·# <span class="token number">4</span><span class="token punctuation">.</span>åˆ†åˆ«å¯åŠ¨å„ä¸ªzkæœåŠ¡å™¨<span class="token operator">-</span> <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span># <span class="token punctuation">.</span>/bin<span class="token operator">/</span>zkServer<span class="token punctuation">.</span>sh start <span class="token operator">/</span>usr<span class="token operator">/</span>conf<span class="token operator">/</span>zoo1<span class="token punctuation">.</span>cfg<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">-</span> <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span># <span class="token punctuation">.</span>/bin<span class="token operator">/</span>zkServer<span class="token punctuation">.</span>sh start <span class="token operator">/</span>usr<span class="token operator">/</span>conf<span class="token operator">/</span>zoo2<span class="token punctuation">.</span>cfg<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span><span class="token operator">-</span> <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span># <span class="token punctuation">.</span>/bin<span class="token operator">/</span>zkServer<span class="token punctuation">.</span>sh start <span class="token operator">/</span>usr<span class="token operator">/</span>conf<span class="token operator">/</span>zoo3<span class="token punctuation">.</span>cfg# <span class="token number">5</span><span class="token punctuation">.</span>æŸ¥çœ‹å„ä¸ªzkæœåŠ¡å™¨çš„è§’è‰²ä¿¡æ¯<span class="token operator">-</span> <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span># <span class="token punctuation">.</span>/bin<span class="token operator">/</span>zkServer<span class="token punctuation">.</span>sh status <span class="token operator">/</span>usr<span class="token operator">/</span>conf<span class="token operator">/</span>zoo1<span class="token punctuation">.</span>cfg# <span class="token number">6</span><span class="token punctuation">.</span>å®¢æˆ·ç«¯è¿æ¥ä»»æ„zkæœåŠ¡å™¨è¿›è¡ŒèŠ‚ç‚¹æ“ä½œ<span class="token operator">-</span> <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span># <span class="token punctuation">.</span>/bin<span class="token operator">/</span>zkCli<span class="token punctuation">.</span>sh <span class="token operator">-</span>server <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">0.220</span><span class="token operator">:</span><span class="token number">3001</span># <span class="token number">7</span><span class="token punctuation">.</span>åœæ­¢ç‰¹å®šzkæœåŠ¡å™¨<span class="token operator">-</span> <span class="token punctuation">[</span>root<span class="token annotation punctuation">@c60</span> zookeeper<span class="token punctuation">]</span># <span class="token punctuation">.</span>/bin<span class="token operator">/</span>zkServer<span class="token punctuation">.</span>sh stop <span class="token operator">/</span>usr<span class="token operator">/</span>conf<span class="token operator">/</span>zoo1<span class="token punctuation">.</span>cfg<span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span></code></pre><hr>]]></content>
      
      
      
        <tags>
            
            <tag> zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dubboè¿è¡Œdemo</title>
      <link href="2021/04/16/dubbo-yun-xing-demo/"/>
      <url>2021/04/16/dubbo-yun-xing-demo/</url>
      
        <content type="html"><![CDATA[<h2 id="å†™ä¸€ä¸ªdubboçš„å°demo"><a href="#å†™ä¸€ä¸ªdubboçš„å°demo" class="headerlink" title="å†™ä¸€ä¸ªdubboçš„å°demo"></a>å†™ä¸€ä¸ªdubboçš„å°demo</h2><span id="more"></span><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210416212323904.png" alt="image-20210416212323904"></p><p><strong>å®˜ç½‘æé†’</strong></p><ol><li>è¯¥æ¥å£éœ€å•ç‹¬æ‰“åŒ…ï¼Œåœ¨æœåŠ¡æä¾›æ–¹å’Œæ¶ˆè´¹æ–¹å…±äº« </li><li>å¯¹æœåŠ¡æ¶ˆè´¹æ–¹éšè—å®ç° </li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨ IoC æ³¨å…¥ </li></ol><h2 id="Api"><a href="#Api" class="headerlink" title="Api"></a>Api</h2><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210416214118428.png" alt="image-20210416214118428"></p><h2 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h2><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210416214146063.png" alt="image-20210416214146063"></p><p><code>provider.xml</code></p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans              http://www.springframework.org/schema/beans/spring-beans-4.3.xsd                      http://dubbo.apache.org/schema/dubbo                      http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æä¾›æ–¹åº”ç”¨ä¿¡æ¯ï¼Œç”¨äºè®¡ç®—ä¾èµ–å…³ç³» --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello-world-app<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒæš´éœ²æœåŠ¡åœ°å€ --></span><span class="token comment" spellcheck="true">&lt;!--    &lt;dubbo:registry address="multicast://224.5.6.7:1234"/>--></span>    <span class="token comment" spellcheck="true">&lt;!-- ç”¨dubboåè®®åœ¨20880ç«¯å£æš´éœ²æœåŠ¡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>protocol</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dubbo<span class="token punctuation">"</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20880<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å£°æ˜éœ€è¦æš´éœ²çš„æœåŠ¡æ¥å£ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>service</span> <span class="token attr-name">interface</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zxh.DemoService<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>demoService<span class="token punctuation">"</span></span> <span class="token attr-name">registry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>N/A<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- å’Œæœ¬åœ°beanä¸€æ ·å®ç°æœåŠ¡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>demoService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zxh.DemoServiceImpl<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p><code>DemoServiceImpl.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DemoService</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">sayHello</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"ä½ å¥½yeqiang"</span><span class="token operator">+</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><code>Provider.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Provider</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ClassPathXmlApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"provider.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h2><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210416214344563.png" alt="image-20210416214344563"></p><p><code>consumer.xml</code></p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>dubbo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://dubbo.apache.org/schema/dubbo<span class="token punctuation">"</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans-4.3.xsd        http://dubbo.apache.org/schema/dubbo        http://dubbo.apache.org/schema/dubbo/dubbo.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- æ¶ˆè´¹æ–¹åº”ç”¨åï¼Œç”¨äºè®¡ç®—ä¾èµ–å…³ç³»ï¼Œä¸æ˜¯åŒ¹é…æ¡ä»¶ï¼Œä¸è¦ä¸æä¾›æ–¹ä¸€æ · --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>application</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>consumer-of-helloworld-app<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨multicastå¹¿æ’­æ³¨å†Œä¸­å¿ƒæš´éœ²å‘ç°æœåŠ¡åœ°å€ --></span><span class="token comment" spellcheck="true">&lt;!--    &lt;dubbo:registry address="multicast://224.5.6.7:1234"/>--></span>    <span class="token comment" spellcheck="true">&lt;!-- ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œå¯ä»¥å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨demoService --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>reference</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span> <span class="token attr-name">interface</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.zxh.DemoService<span class="token punctuation">"</span></span>                     <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dubbo://localhost:20880<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span></code></pre><p><code>Consumer.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ClassPathXmlApplicationContext context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"consumer.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        context<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        DemoService hello <span class="token operator">=</span> <span class="token punctuation">(</span>DemoService<span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String what <span class="token operator">=</span> hello<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token string">"what"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>what<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="éœ€è¦çš„ä¾èµ–"><a href="#éœ€è¦çš„ä¾èµ–" class="headerlink" title="éœ€è¦çš„ä¾èµ–"></a>éœ€è¦çš„ä¾èµ–</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/dubbo --></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.6.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.1.7.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.javassist<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javassist<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.20.0-GA<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!-- https://mvnrepository.com/artifact/org.jboss.netty/netty --></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.jboss.netty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>netty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.2.5.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.zxh<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.netty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>netty-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.1.32.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><h3 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h3><blockquote><p>netty-allè¿™ä¸ªä¾èµ–è¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œéœ€è¦å¼•å…¥ï¼Œè¿™ä¸ªå®˜ç½‘ä¸Šæ²¡æœ‰è¯´</p></blockquote><blockquote><p>Consumer å’Œ Provider  è¿™ä¸¤ä¸ªæ¨¡å—éƒ½éœ€è¦å¼•å…¥ api è¿™ä¸ªåŒ…çš„ä¾èµ–</p></blockquote><h2 id="Springbootæ•´åˆDubbo"><a href="#Springbootæ•´åˆDubbo" class="headerlink" title="Springbootæ•´åˆDubbo"></a>Springbootæ•´åˆDubbo</h2><h3 id="2-1-pom-xml"><a href="#2-1-pom-xml" class="headerlink" title="2.1 pom.xml"></a>2.1 pom.xml</h3><blockquote><p>è¿™ä¸¤ä¸ªæ˜¯æœ€ä¸»è¦çš„ä¾èµ–ï¼Œä¸è¦ç”¨dubbo 2.7.8ï¼Œç”¨ä¸äº†ï¼›</p></blockquote><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo-dependencies-zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>å…¶ä»–çš„å’Œspring æ•´åˆä¸€æ ·ã€‚</p><h3 id="2-2-provider-xml"><a href="#2-2-provider-xml" class="headerlink" title="2.2 provider.xml"></a>2.2 provider.xml</h3><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">dubbo</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> provider  <span class="token key atrule">protocol</span><span class="token punctuation">:</span>    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">20880</span>  <span class="token key atrule">registry</span><span class="token punctuation">:</span>    <span class="token key atrule">address</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span>//8.136.187.29<span class="token punctuation">:</span><span class="token number">2181</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8099</span></code></pre><p>æ²¡ä»€ä¹ˆå¯è¯´çš„ï¼Œå°±é…±ç´«</p><h2 id="Dubbo-admin-çš„ä½¿ç”¨"><a href="#Dubbo-admin-çš„ä½¿ç”¨" class="headerlink" title="Dubbo-admin çš„ä½¿ç”¨"></a>Dubbo-admin çš„ä½¿ç”¨</h2><h3 id="3-1-Github-ä¸‹è½½-dubbo-admin-ä¼šç”¨dockerçš„è¯ï¼Œæ¨èç”¨docker"><a href="#3-1-Github-ä¸‹è½½-dubbo-admin-ä¼šç”¨dockerçš„è¯ï¼Œæ¨èç”¨docker" class="headerlink" title="3.1 Github ä¸‹è½½ dubbo-admin(ä¼šç”¨dockerçš„è¯ï¼Œæ¨èç”¨docker)"></a>3.1 Github ä¸‹è½½ dubbo-admin(ä¼šç”¨dockerçš„è¯ï¼Œæ¨èç”¨docker)</h3><blockquote><p>åˆšä¸‹å®Œï¼Œå¯¼å…¥ä¾èµ–è‚¯èƒ½ä¼šè¯è´¹</p></blockquote><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210419100649393.png"></p><h3 id="3-2-é…ç½®dubbo-admin-server"><a href="#3-2-é…ç½®dubbo-admin-server" class="headerlink" title="3.2 é…ç½®dubbo-admin-server"></a>3.2 é…ç½®dubbo-admin-server</h3><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210419100954460.png"></p><h3 id="3-3-å¯åŠ¨dubbo-admin-ui"><a href="#3-3-å¯åŠ¨dubbo-admin-ui" class="headerlink" title="3.3  å¯åŠ¨dubbo-admin-ui"></a>3.3  å¯åŠ¨dubbo-admin-ui</h3><p>  è¿›å…¥åˆ°dubbo-admin-ui çš„æ ¹ç›®å½•ï¼Œ</p><pre class=" language-sh"><code class="language-sh">#è¿è¡Œnpm installnpm run dev</code></pre><h3 id="3-4æœ€ç»ˆé¡µé¢å±•ç¤º"><a href="#3-4æœ€ç»ˆé¡µé¢å±•ç¤º" class="headerlink" title="3.4æœ€ç»ˆé¡µé¢å±•ç¤º"></a>3.4æœ€ç»ˆé¡µé¢å±•ç¤º</h3><p><img src="/2021/04/16/dubbo-yun-xing-demo/image-20210419101214278.png"></p><p> å“ˆå“ˆå“ˆå“ˆå“ˆ ï¼Œå¾ˆå¥½çœ‹çš„ï¼Œ</p>]]></content>
      
      
      
        <tags>
            
            <tag> dubbo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxçš„ä½¿ç”¨</title>
      <link href="2021/04/16/nginx-de-shi-yong/"/>
      <url>2021/04/16/nginx-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>åœ¨linuxä¸­ä½¿ç”¨nginx</p><span id="more"></span><pre class=" language-shell"><code class="language-shell">sudo apt-get install nginx</code></pre><h2 id="apt-get-ä¸‹è½½çš„è½¯ä»¶ç›®å½•åœ¨å“ªé‡Œï¼Ÿ"><a href="#apt-get-ä¸‹è½½çš„è½¯ä»¶ç›®å½•åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="apt-get ä¸‹è½½çš„è½¯ä»¶ç›®å½•åœ¨å“ªé‡Œï¼Ÿ"></a>apt-get ä¸‹è½½çš„è½¯ä»¶ç›®å½•åœ¨å“ªé‡Œï¼Ÿ</h2><h4 id="binç›®å½•åœ¨-usr-sbin-è½¯ä»¶åå­—-ä¸‹é¢"><a href="#binç›®å½•åœ¨-usr-sbin-è½¯ä»¶åå­—-ä¸‹é¢" class="headerlink" title="binç›®å½•åœ¨ /usr/sbin/[è½¯ä»¶åå­—]  ä¸‹é¢"></a>binç›®å½•åœ¨ /usr/sbin/[è½¯ä»¶åå­—]  ä¸‹é¢</h4><h4 id="é…ç½®æ–‡ä»¶åœ¨-etc-è½¯ä»¶åå­—-ä¸‹é¢"><a href="#é…ç½®æ–‡ä»¶åœ¨-etc-è½¯ä»¶åå­—-ä¸‹é¢" class="headerlink" title="é…ç½®æ–‡ä»¶åœ¨ /etc/[è½¯ä»¶åå­—]   ä¸‹é¢"></a>é…ç½®æ–‡ä»¶åœ¨ /etc/[è½¯ä»¶åå­—]   ä¸‹é¢</h4><h2 id="é…ç½®æ–‡ä»¶è§£æ"><a href="#é…ç½®æ–‡ä»¶è§£æ" class="headerlink" title="é…ç½®æ–‡ä»¶è§£æ"></a>é…ç½®æ–‡ä»¶è§£æ</h2><blockquote><p>Worker_processes: åŸºæœ¬éƒ½æ˜¯è‡ªå·±ç”µè„‘CPU æ ¸ä¸ªæ•°+1ï¼›</p></blockquote><p><img src="/2021/04/16/nginx-de-shi-yong/image-20210416101603702.png" alt="image-20210416101603702"></p><blockquote><p>èµ„æºäº‰æŠ¢é…ç½®</p></blockquote><p><img src="/2021/04/16/nginx-de-shi-yong/image-20210416101930942.png" alt="image-20210416101930942"></p><blockquote><p>ç›´æ¥ä¸Šæ³¨é‡Šï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</p></blockquote><p><img src="/2021/04/16/nginx-de-shi-yong/image-20210416102332546.png" alt="image-20210416102332546"></p><blockquote><p>é…ç½®é›†ç¾¤ï¼ˆéƒ½æ˜¯è¦è‡ªå·±åŠ çš„ï¼Œåœ¨Virtual Host Configsä¸‹é¢æ·»åŠ ï¼Œä½ ä¼šçš„å“ˆ zxhï¼Œåˆ«å¿˜è®°äº†å“¦ï¼‰</p></blockquote><p><img src="/2021/04/16/nginx-de-shi-yong/image-20210416111849113.png" alt="image-20210416111849113"></p><p>æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</p><pre class=" language-shell"><code class="language-shell">sudo nginx -tq</code></pre><p>Reload Nginx</p><pre class=" language-shell"><code class="language-shell">sudo nginx -s reload        </code></pre><blockquote><p>é…ç½®ç¼“å­˜</p></blockquote><p><img src="/2021/04/16/nginx-de-shi-yong/image-20210416114200963.png" alt="image-20210416114200963"></p><p>è®¿é—®æœ¬åœ°80ç«¯å£ä¼šå‡ºç°</p><p><img src="/2021/04/16/nginx-de-shi-yong/image-20210416114240115.png" alt="image-20210416114240115"></p><h2 id="é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥"><a href="#é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥" class="headerlink" title="é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥"></a>é»˜è®¤è´Ÿè½½å‡è¡¡ç­–ç•¥</h2><p>è½®è¯¢ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰</p><p>è¿˜å¯ä»¥åŠ æƒé‡ï¼ˆçœ‹é…ç½®æ–‡ä»¶ï¼Œå°±æ˜¯ä¸Šå›¾çš„weightï¼‰</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>spring_springbooté…ç½®</title>
      <link href="2021/04/06/spring-springboot-pei-zhi/"/>
      <url>2021/04/06/spring-springboot-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>å¼ å¿˜å·ä¸“ç”¨é…ç½®ï¼</p><span id="more"></span>    <h2 id="ymlåŸºæœ¬é…ç½®ï¼ˆå¾…è¡¥å……ï¼‰"><a href="#ymlåŸºæœ¬é…ç½®ï¼ˆå¾…è¡¥å……ï¼‰" class="headerlink" title="ymlåŸºæœ¬é…ç½®ï¼ˆå¾…è¡¥å……ï¼‰"></a>ymlåŸºæœ¬é…ç½®ï¼ˆå¾…è¡¥å……ï¼‰</h2><p><code>application.yml</code></p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>    <span class="token key atrule">context-path</span><span class="token punctuation">:</span> /shiro<span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> shiro  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>    <span class="token key atrule">view</span><span class="token punctuation">:</span>      <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /      <span class="token key atrule">suffix</span><span class="token punctuation">:</span> .jsp    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/**  <span class="token key atrule">web</span><span class="token punctuation">:</span>    <span class="token key atrule">resources</span><span class="token punctuation">:</span>      <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span>              <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> zxh228..    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/shiro  <span class="token key atrule">redis</span><span class="token punctuation">:</span>    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost    <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token key atrule">logging</span><span class="token punctuation">:</span>  <span class="token key atrule">level</span><span class="token punctuation">:</span>    <span class="token key atrule">com.zxh.shirotest.mapper</span> <span class="token punctuation">:</span> debug</code></pre><h2 id="JavaConfigï¼ˆå¾…è¡¥å……ï¼‰"><a href="#JavaConfigï¼ˆå¾…è¡¥å……ï¼‰" class="headerlink" title="JavaConfigï¼ˆå¾…è¡¥å……ï¼‰"></a>JavaConfigï¼ˆå¾…è¡¥å……ï¼‰</h2><h3 id="ç»§æ‰¿WebMvcConfigurer"><a href="#ç»§æ‰¿WebMvcConfigurer" class="headerlink" title="ç»§æ‰¿WebMvcConfigurer"></a>ç»§æ‰¿WebMvcConfigurer</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyWebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>ResourceHandlerRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">"/static/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"file:/usr/local/xuhui/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="å¦‚æœ-springBoot-æƒ³è¦ç”¨-jsp-å…‰å¯¼å…¥ä¾èµ–å’Œ-webapp-æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦é…ç½®å·¥ä½œç›®å½•"><a href="#å¦‚æœ-springBoot-æƒ³è¦ç”¨-jsp-å…‰å¯¼å…¥ä¾èµ–å’Œ-webapp-æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦é…ç½®å·¥ä½œç›®å½•" class="headerlink" title="å¦‚æœ springBoot æƒ³è¦ç”¨ jsp å…‰å¯¼å…¥ä¾èµ–å’Œ webapp æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦é…ç½®å·¥ä½œç›®å½•"></a>å¦‚æœ springBoot æƒ³è¦ç”¨ jsp å…‰å¯¼å…¥ä¾èµ–å’Œ webapp æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦é…ç½®å·¥ä½œç›®å½•</h3><h2 id="ç”¨åˆ°çš„ä¾èµ–"><a href="#ç”¨åˆ°çš„ä¾èµ–" class="headerlink" title="ç”¨åˆ°çš„ä¾èµ–"></a>ç”¨åˆ°çš„ä¾èµ–</h2><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--        è¿æ¥æ± --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.19<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--        é€šç”¨mapper--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>tk.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mapper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--       mapStruct--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mapstruct<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mapstruct<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.4.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.mapstruct<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mapstruct-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.4.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--       Dubbo+zookeeper æ»¡é…SpringBoot--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo-dependencies-zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--        sms--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>aliyun-java-sdk-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>4.5.20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--        oss--></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.aliyun.oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>aliyun-sdk-oss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>       <span class="token comment" spellcheck="true">&lt;!-- åˆ†é¡µæ’ä»¶ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>pagehelper-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.3.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--  shiro æ ¸å¿ƒåŒ…--></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!-- shiro ç¼“å­˜ ehcache --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-ehcache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--        hutoolå·¥å…·ç±»ï¼Œåªè¦æ˜¯ç”¨ç±»å‹è½¬æ¢--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>5.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring_springboot_å¼‚å¸¸ä¼˜é›…å¤„ç†andç»Ÿä¸€è¿”å›å€¼</title>
      <link href="2021/04/06/spring-springboot-yi-chang-you-ya-chu-li-and-tong-yi-fan-hui-zhi/"/>
      <url>2021/04/06/spring-springboot-yi-chang-you-ya-chu-li-and-tong-yi-fan-hui-zhi/</url>
      
        <content type="html"><![CDATA[<p>ç»Ÿä¸€è¿”å›å€¼å’Œå¼‚å¸¸å¤„ç†</p><span id="more"></span><h2 id="è‡ªå®šä¹‰æšä¸¾ç±»"><a href="#è‡ªå®šä¹‰æšä¸¾ç±»" class="headerlink" title="è‡ªå®šä¹‰æšä¸¾ç±»"></a>è‡ªå®šä¹‰æšä¸¾ç±»</h2><p><code>ResultEnum.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>enums<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>AllArgsConstructor<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>NoArgsConstructor<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>omg<span class="token punctuation">.</span>CORBA<span class="token punctuation">.</span>NO_PERMISSION<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/5 9:17 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">enum</span> ResultEnum <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ•°æ®æ“ä½œå®šä¹‰</span>    <span class="token function">SUCCESS</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">TIME_OUT</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span> <span class="token string">"è®¿é—®è¶…æ—¶"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NO_PERMISSION</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">,</span> <span class="token string">"æ‹’ç»è®¿é—®"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NO_AUTH</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">,</span> <span class="token string">"æœªç»æˆæƒè®¿é—®"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NOT_FOUND</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">"æ— æ³•æ‰¾åˆ°èµ„æº"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">METHOD_NOT_ALLOWED</span><span class="token punctuation">(</span><span class="token number">405</span><span class="token punctuation">,</span> <span class="token string">"ä¸æ”¯æŒå½“å‰è¯·æ±‚æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">SERVER_ERROR</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">" æœåŠ¡å™¨è¿è¡Œå¼‚å¸¸"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NOT_PARAM</span><span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span> <span class="token string">"å‚æ•°ä¸èƒ½ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NOT_EXIST_USER_OR_ERROR_PASSWORD</span><span class="token punctuation">(</span><span class="token number">10002</span><span class="token punctuation">,</span> <span class="token string">"è¯¥ç”¨æˆ·ä¸å­˜åœ¨æˆ–å¯†ç é”™è¯¯"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">NOT_PARAM_USER_OR_ERROR_PASSWORD</span><span class="token punctuation">(</span><span class="token number">10003</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·åæˆ–å¯†ç ä¸ºç©º"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">private</span> <span class="token keyword">final</span> Integer code<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> String message<span class="token punctuation">;</span>    <span class="token function">ResultEnum</span><span class="token punctuation">(</span>Integer code<span class="token punctuation">,</span> String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> code<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> message<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="è‡ªå®šä¹‰å¼‚å¸¸ç±»"><a href="#è‡ªå®šä¹‰å¼‚å¸¸ç±»" class="headerlink" title="è‡ªå®šä¹‰å¼‚å¸¸ç±»"></a>è‡ªå®šä¹‰å¼‚å¸¸ç±»</h2><p><code>DifinitionException.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>exception<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>AllArgsConstructor<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>NoArgsConstructor<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/5 9:34 ä¸‹åˆ * @description: */</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefinitionException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">{</span>    <span class="token keyword">protected</span> Integer errorCode<span class="token punctuation">;</span>    <span class="token keyword">protected</span> String  errorMsg<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»"><a href="#å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»" class="headerlink" title="å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»"></a>å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»</h2><p><code>GloableExceptionHandler.java</code></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>exception<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>vo<span class="token punctuation">.</span>Result<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ControllerAdvice<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ExceptionHandler<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ResponseBody<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/5 9:46 ä¸‹åˆ * @description: */</span><span class="token annotation punctuation">@ControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>DefinitionException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> Result <span class="token function">myExceptionHandler</span><span class="token punctuation">(</span>DefinitionException e<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">defineError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="å®šä¹‰ç»Ÿä¸€è¿”å›å€¼"><a href="#å®šä¹‰ç»Ÿä¸€è¿”å›å€¼" class="headerlink" title="å®šä¹‰ç»Ÿä¸€è¿”å›å€¼"></a>å®šä¹‰ç»Ÿä¸€è¿”å›å€¼</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>vo<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>enums<span class="token punctuation">.</span>ResultEnum<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>spring_exception<span class="token punctuation">.</span>exception<span class="token punctuation">.</span>DefinitionException<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/5 9:08 ä¸‹åˆ * @description: */</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer code<span class="token punctuation">;</span>    <span class="token keyword">private</span> String message<span class="token punctuation">;</span>    <span class="token keyword">private</span> T data<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * @param code    å“åº”ç      * @param message å“åº”ä¿¡æ¯     */</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>Integer code<span class="token punctuation">,</span> String message<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * @param code    å“åº”ç      * @param message å“åº”ä¿¡æ¯     * @param data    å“åº”æ•°æ®     */</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>Integer code<span class="token punctuation">,</span> String message<span class="token punctuation">,</span> T data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * @param resultEnum resultEnum è‡ªå®šä¹‰æšä¸¾ç±»ï¼ŒåŒ…å« code å’Œ message     * @param data æ•°æ®     */</span>    <span class="token keyword">public</span> <span class="token function">Result</span><span class="token punctuation">(</span>ResultEnum resultEnum<span class="token punctuation">,</span>T data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> resultEnum<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> resultEnum<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     *     * @param e è‡ªå®šä¹‰å¼‚å¸¸     * @return è¿”å›result     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Result<span class="token operator">&lt;</span>Object<span class="token operator">></span> <span class="token function">defineError</span><span class="token punctuation">(</span>DefinitionException e<span class="token punctuation">)</span><span class="token punctuation">{</span>        Result<span class="token operator">&lt;</span>Object<span class="token operator">></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getErrorCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Macä½¿ç”¨redis</title>
      <link href="2021/04/06/mac-shi-yong-redis/"/>
      <url>2021/04/06/mac-shi-yong-redis/</url>
      
        <content type="html"><![CDATA[<p>redisçš„åŸºæœ¬ç”¨æ³•ï¼Œç»“åˆhomebrew</p><span id="more"></span><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>å¯åŠ¨</p><p>âœ redis-server /opt/homebrew/etc/redis.conf</p><p>æŸ¥çœ‹</p><p>âœ redis-cli</p><p>å¦‚æœå‡ºç°<code>127.0.0.1:6379&gt;</code> åˆ™æˆåŠŸ</p><p>è¿˜æœ‰ä¸€ç§å¯åŠ¨æ–¹æ³•å°±æ˜¯</p><p>brew services start redis</p><h2 id="å…³äºHome-brewï¼ˆtestï¼‰"><a href="#å…³äºHome-brewï¼ˆtestï¼‰" class="headerlink" title="å…³äºHome-brewï¼ˆtestï¼‰"></a>å…³äºHome-brewï¼ˆtestï¼‰</h2><p>ä½¿ç”¨çš„æŒ‡ä»¤</p><p>brew docotr</p><p>brew cleanup æ¸…ç†åŒ…</p><p>which -a git æŸ¥çœ‹æ‰€æœ‰gitè·¯å¾„</p><p>è¿è¡Œbrew doctor</p><p>Warning: Unbrewed header files were found in /usr/local/include.<br>If you didnâ€™t put them there on purpose they could cause problems when<br>building Homebrew formulae, and may need to be deleted.</p><p>ä¼šæœ‰ä»¥ä¸Šçš„è­¦å‘Š</p><p>Stack overflow ä¸Šè¯´æ˜¯æ²¡æœ‰ç”¨homebrewå®‰è£…node æ‰€æœ‰å¿½ç•¥å°±è¡Œäº†å§</p><p>æš‚æ—¶å°±è¿™æ ·</p><h2 id="æˆ‘çš„redisæŒä¹…åŒ–æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ"><a href="#æˆ‘çš„redisæŒä¹…åŒ–æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="æˆ‘çš„redisæŒä¹…åŒ–æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ"></a>æˆ‘çš„redisæŒä¹…åŒ–æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ</h2><p>/opt/homebrew/var/db/redis</p><p>ä¸»è¦æ˜¯åœ¨ opt/homebrew/var è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢</p>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring_springMvcè¯¦è§£</title>
      <link href="2021/04/05/spring-springmvc-xiang-jie/"/>
      <url>2021/04/05/spring-springmvc-xiang-jie/</url>
      
        <content type="html"><![CDATA[<p>springMvcçš„å­¦ä¹ æ€»ç»“å¾…å®Œå–„å“¦</p><span id="more"></span><h2 id="ç®€å•æµç¨‹"><a href="#ç®€å•æµç¨‹" class="headerlink" title="ç®€å•æµç¨‹"></a>ç®€å•æµç¨‹</h2><p>éšæ„ç”»çš„æµç¨‹å›¾ï¼ˆå…¶å®æ˜¯ç”¨é”™è½¯ä»¶äº†ï¼Œæ­»ğŸå½“æ´»é©¬åŒ»ï¼‰</p><p><img src="/2021/04/05/spring-springmvc-xiang-jie/springmvc.jpg" alt="springmvc"></p><h2 id="æ­¥éª¤ç®€è¿°"><a href="#æ­¥éª¤ç®€è¿°" class="headerlink" title="æ­¥éª¤ç®€è¿°"></a>æ­¥éª¤ç®€è¿°</h2><ol><li>å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°  <code>DispatcherServlet</code> , <code>DispatcherServlet</code>å»æ‰¾ <code>HandlerMapping</code></li><li><code>HandlerMapping</code> å†å»æ‰¾åˆ° <code>Handler</code> ï¼Œ<code>Handler</code> æ‰¾åˆ° url çš„æ‰§è¡Œé“¾ï¼Œæ‰§è¡Œé“¾é‡Œé¢éƒ½æ˜¯ <code>HandlerInterceptor</code> ï¼Œæ ¹æ®<code>HandlerInterceptor</code> é‡Œé¢çš„ preHandler çš„è¿”å›å€¼åˆ¤æ–­ï¼Œå¦‚æœè¿”å›æ˜¯true å°±æ‰¾åˆ° <code>HandlerAdapter</code>ã€‚false å°±ç»ˆæ­¢ï¼Œå»å¯»æ‰¾ä¸‹ä¸€ä¸ªã€‚</li><li><code>HandlerAdapter</code> æ‰¾åˆ°  <code>Handler</code> è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œæ•°æ®å¤„ç†ï¼Œæœ€åå°†å¤„ç†åçš„ç»“æœæ‰“åŒ…æˆ <code>modleAndView</code>  è¿”å›ç»™ <code>DispatcherServlet</code> </li><li>è¿™æ—¶ <code>DispatcherServlet</code> è§£æ <code>modelAndView</code> æœ€åè¿”å›ç»™ View æ¸²æŸ“</li></ol><h2 id="éœ€è¦æŒæ¡çš„æ ¸å¿ƒ"><a href="#éœ€è¦æŒæ¡çš„æ ¸å¿ƒ" class="headerlink" title="éœ€è¦æŒæ¡çš„æ ¸å¿ƒ"></a>éœ€è¦æŒæ¡çš„æ ¸å¿ƒ</h2><p><strong>æ ¸å¿ƒï¼š</strong> HandlerInterceptor</p><ul><li>preHandle</li><li>postHandle</li><li>afterCompletion</li></ul><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>æ—¥å¿—ï¼Œè¯·æ±‚æ‹¦æˆª</p><h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>å¾ˆå¤šåŸºç¡€æ²¡æœ‰è®²ï¼Œæˆ‘è®¤ä¸ºåŸºç¡€æ²¡æœ‰æ„ä¹‰é‡å¤è®ºè¿°ã€‚</p><p>è¿˜éœ€å¾…æ”¹è¿›ï¼Œéœ€è¦å›æº¯ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>shiroæ•´åˆspringboot</title>
      <link href="2021/04/04/shiro-zheng-he-springboot/"/>
      <url>2021/04/04/shiro-zheng-he-springboot/</url>
      
        <content type="html"><![CDATA[<p>Shiroçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ•´åˆspringboot</p><span id="more"></span><h2 id="ä¾èµ–å¯¼å…¥"><a href="#ä¾èµ–å¯¼å…¥" class="headerlink" title="ä¾èµ–å¯¼å…¥"></a>ä¾èµ–å¯¼å…¥</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.shiro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>shiro-spring-boot-web-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.5.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p><img src="/2021/04/04/shiro-zheng-he-springboot/image-20210406204004697.png" alt="image-20210406204004697"></p><h3 id="ç®€å•è¯´è¯´å§"><a href="#ç®€å•è¯´è¯´å§" class="headerlink" title="ç®€å•è¯´è¯´å§"></a>ç®€å•è¯´è¯´å§</h3><ul><li>Filter : é‡Œé¢åŸºæœ¬éƒ½æ˜¯éœ€è¦è¿‡æ»¤ä¸€äº›ï¼Œæƒé™ä¿¡æ¯ï¼Œæœ‰å“ªäº›èµ„æºæ˜¯å…¬å…±çš„ï¼Œå“ªäº›èµ„æºæ˜¯å¼€æ”¾çš„ã€‚åœ¨æœªç™»å½•ä¹‹å‰èƒ½è®¿é—®å“ªä¸€äº›èµ„æºï¼Œé»˜è®¤æ˜¯ï¼Œindexå¼€å¤´çš„æ–‡ä»¶</li><li>Manager : å°±æ˜¯ç”¨æ¥ç®¡ç† Realm çš„</li><li>Realm ï¼šç®—æ˜¯ä¸€ä¸ª ç®¡ç†å™¨å§ï¼Œ å®ƒç”¨æ¥å¯¹ è¿”å›çš„è‡ªå®šä¹‰çš„ realm è¿›è¡Œè®¾ç½®ä¸€äº›ä¸œè¥¿ï¼Œä¾‹å¦‚ï¼Œæ˜¯å¦å¼€å¯ç¼“å­˜</li></ul><p>å¯ä»¥ç”¨è‡ªå¸¦çš„ ehcache ï¼Œä¹Ÿå¯ä»¥ç”¨è‡ªå·±å®šä¹‰çš„ redis cacheã€‚ ä¹Ÿå¯ä»¥è®¾ç½®<code>å¯†ç åŒ¹é…å™¨</code></p><ul><li>è‡ªå®šä¹‰çš„ Realm <ul><li><code>authentication :</code> æ ¡éªŒç™»å½•æƒé™</li><li><code>authorization :</code>   æˆæƒèµ„æº</li></ul></li></ul><h3 id="å®šä¹‰Config"><a href="#å®šä¹‰Config" class="headerlink" title="å®šä¹‰Config"></a>å®šä¹‰Config</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>config<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>CustomerRealm<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>RedisCacheManager<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span>credential<span class="token punctuation">.</span>HashedCredentialsMatcher<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>ehcache<span class="token punctuation">.</span>EhCacheManager<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>realm<span class="token punctuation">.</span>Realm<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>web<span class="token punctuation">.</span>ShiroFilterFactoryBean<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span>DefaultWebSecurityManager<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Qualifier<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Bean<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>HashMap<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Map<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/4 5:09 ä¸‹åˆ * @description: */</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShiroConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//1 shiroFilter è´Ÿè´£æ‹¦æˆªæ‰€æœ‰è¯·æ±‚</span>    <span class="token comment" spellcheck="true">//2 å®‰å…¨ç®¡ç†å™¨</span>    <span class="token comment" spellcheck="true">//3 è‡ªå®šä¹‰realm</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"shiroFilterFactoryBean"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ShiroFilterFactoryBean <span class="token function">getShiroFilterFactoryBean</span><span class="token punctuation">(</span>DefaultWebSecurityManager defaultWebSecurityManager<span class="token punctuation">)</span><span class="token punctuation">{</span>        ShiroFilterFactoryBean shiroFilterFactoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span>        shiroFilterFactoryBean<span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>defaultWebSecurityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é…ç½®ç³»ç»Ÿçš„å—é™èµ„æº</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>String<span class="token operator">></span> map  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//anonè®¾ç½®ä¸ºå…¬å…±èµ„æº</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/user/**"</span><span class="token punctuation">,</span><span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/register.jsp"</span><span class="token punctuation">,</span><span class="token string">"anon"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">/</span><span class="token operator">/</span> authc è¯·æ±‚è¿™ä¸ªèµ„æºéœ€è¦è®¤è¯å’Œæˆæƒ        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span><span class="token string">"authc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token operator">/</span><span class="token operator">*</span>é»˜è®¤è®¤è¯ç•Œé¢è·¯å¾„<span class="token punctuation">,</span>è¿™ä¸ªä¸å†™ ä¹Ÿè¡Œ<span class="token punctuation">,</span>å› ä¸ºè¿™ä¸ªå’Œé»˜è®¤çš„ä¸€æ‘¸ä¸€æ ·t        shiroFilterFactoryBean<span class="token punctuation">.</span><span class="token function">setLoginUrl</span><span class="token punctuation">(</span><span class="token string">"/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">*</span><span class="token operator">/</span>        shiroFilterFactoryBean<span class="token punctuation">.</span><span class="token function">setFilterChainDefinitionMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// é…ç½®ç³»ç»Ÿçš„å…¬å…±èµ„æº</span>        <span class="token keyword">return</span> shiroFilterFactoryBean<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> DefaultWebSecurityManager <span class="token function">getDefaultWebSecurityManager</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"customerRealm"</span><span class="token punctuation">)</span> Realm realm<span class="token punctuation">)</span><span class="token punctuation">{</span>        DefaultWebSecurityManager defaultWebSecurityManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultWebSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        defaultWebSecurityManager<span class="token punctuation">.</span><span class="token function">setRealm</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> defaultWebSecurityManager<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"customerRealm"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Realm <span class="token function">getRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        CustomerRealm customerRealm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomerRealm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ä¿®æ”¹å‡­è¯æ ¡éªŒåŒ¹é…å™¨</span>        HashedCredentialsMatcher hashedCredentialsMatcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashedCredentialsMatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è®¾ç½®åŠ å¯†ç®—æ³•ä¸ºmd5</span>        hashedCredentialsMatcher<span class="token punctuation">.</span><span class="token function">setHashAlgorithmName</span><span class="token punctuation">(</span><span class="token string">"Md5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//è®¾ç½®æ•£åˆ—æ¬¡æ•°</span>        hashedCredentialsMatcher<span class="token punctuation">.</span><span class="token function">setHashIterations</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setCredentialsMatcher</span><span class="token punctuation">(</span>hashedCredentialsMatcher<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¼€å¯ç¼“å­˜ç®¡ç†</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setCacheManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RedisCacheManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// å¼€å¯å…¨å±€çš„ç¼“å­˜ç®¡ç†</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setCachingEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¼€å¯è®¤è¯ç¼“å­˜</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setAuthenticationCachingEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å¼€å¯æˆæƒç¼“å­˜</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setAuthenticationCacheName</span><span class="token punctuation">(</span><span class="token string">"authenticationCache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setAuthorizationCachingEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        customerRealm<span class="token punctuation">.</span><span class="token function">setAuthorizationCacheName</span><span class="token punctuation">(</span><span class="token string">"authorizationCache"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> customerRealm<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="è‡ªå®šä¹‰Realm"><a href="#è‡ªå®šä¹‰Realm" class="headerlink" title="è‡ªå®šä¹‰Realm"></a>è‡ªå®šä¹‰Realm</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>shiro<span class="token punctuation">;</span><span class="token keyword">import</span> cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>extra<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>SpringUtil<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>Perms<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>entity<span class="token punctuation">.</span>User<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>service<span class="token punctuation">.</span>UserService<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>salt<span class="token punctuation">.</span>MyByteSource<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span>AuthenticationException<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span>AuthenticationInfo<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span>AuthenticationToken<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span>SimpleAuthenticationInfo<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authz<span class="token punctuation">.</span>AuthorizationInfo<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authz<span class="token punctuation">.</span>SimpleAuthorizationInfo<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>realm<span class="token punctuation">.</span>AuthorizingRealm<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>subject<span class="token punctuation">.</span>PrincipalCollection<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>util<span class="token punctuation">.</span>CollectionUtils<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ObjectUtils<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: AmberZxh * @DateTime: 2021/4/4 5:17 ä¸‹åˆ * @description: */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomerRealm</span> <span class="token keyword">extends</span> <span class="token class-name">AuthorizingRealm</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> AuthorizationInfo <span class="token function">doGetAuthorizationInfo</span><span class="token punctuation">(</span>PrincipalCollection principalCollection<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–ä¸»èº«ä»½ä¿¡æ¯</span>        String primaryPrincipal <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> principalCollection<span class="token punctuation">.</span><span class="token function">getPrimaryPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è°ƒç”¨æˆæƒéªŒè¯"</span><span class="token operator">+</span>primaryPrincipal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ ¹æ®ä¸»èº«ä»½ä¿¡æ¯è·å–è§’è‰² å’Œ æƒé™ä¿¡æ¯</span>        UserService userService <span class="token operator">=</span> SpringUtil<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        User user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findRolesByUserName</span><span class="token punctuation">(</span>primaryPrincipal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>CollectionUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            SimpleAuthorizationInfo simpleAuthorizationInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthorizationInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            user<span class="token punctuation">.</span><span class="token function">getRoles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>role<span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">{</span>                simpleAuthorizationInfo<span class="token punctuation">.</span><span class="token function">addRole</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                List<span class="token operator">&lt;</span>Perms<span class="token operator">></span> perms <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findPermsByRoleId</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>CollectionUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>perms<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    perms<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>perm <span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">{</span>                        simpleAuthorizationInfo<span class="token punctuation">.</span><span class="token function">addStringPermission</span><span class="token punctuation">(</span>perm<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> simpleAuthorizationInfo<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> AuthenticationInfo <span class="token function">doGetAuthenticationInfo</span><span class="token punctuation">(</span>AuthenticationToken authenticationToken<span class="token punctuation">)</span> <span class="token keyword">throws</span> AuthenticationException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"========================"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        UserService userService <span class="token operator">=</span> SpringUtil<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢</span>        String principal <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> authenticationToken<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        User user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findByUserName</span><span class="token punctuation">(</span>principal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ObjectUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthenticationInfo</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">MyByteSource</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getSalt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="éªŒè¯æµç¨‹"><a href="#éªŒè¯æµç¨‹" class="headerlink" title="éªŒè¯æµç¨‹"></a>éªŒè¯æµç¨‹</h3><h2 id="è¿‡æ»¤å™¨è¡¨"><a href="#è¿‡æ»¤å™¨è¡¨" class="headerlink" title="è¿‡æ»¤å™¨è¡¨"></a>è¿‡æ»¤å™¨è¡¨</h2><table><thead><tr><th>é…ç½®ç¼©å†™</th><th>å¯¹åº”çš„è¿‡æ»¤å™¨</th><th align="center">åŠŸèƒ½</th></tr></thead><tbody><tr><td>éªŒè¯ç›¸å…³</td><td></td><td align="center"></td></tr><tr><td>anon</td><td>AnonymousFilter</td><td align="center">æŒ‡å®šurlå¯ä»¥åŒ¿åè®¿é—®</td></tr><tr><td>authc</td><td>FormAuthenticationFilter</td><td align="center">åŸºäºè¡¨å•çš„æ‹¦æˆªå™¨ï¼›å¦‚â€œ/**=authcâ€ï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ä¼šè·³åˆ°ç›¸åº”çš„ç™»å½•é¡µé¢ç™»å½•ï¼›ä¸»è¦å±æ€§ï¼šusernameParamï¼šè¡¨å•æäº¤çš„ç”¨æˆ·åå‚æ•°åï¼ˆ usernameï¼‰ï¼› passwordParamï¼šè¡¨å•æäº¤çš„å¯†ç å‚æ•°åï¼ˆpasswordï¼‰ï¼› rememberMeParamï¼šè¡¨å•æäº¤çš„å¯†ç å‚æ•°åï¼ˆrememberMeï¼‰ï¼› loginUrlï¼šç™»å½•é¡µé¢åœ°å€ï¼ˆ/login.jspï¼‰ï¼›successUrlï¼šç™»å½•æˆåŠŸåçš„é»˜è®¤é‡å®šå‘åœ°å€ï¼› failureKeyAttributeï¼šç™»å½•å¤±è´¥åé”™è¯¯ä¿¡æ¯å­˜å‚¨keyï¼ˆshiroLoginFailureï¼‰</td></tr><tr><td>authcBasic</td><td>BasicHttpAuthenticationFilter</td><td align="center">Basic HTTPèº«ä»½éªŒè¯æ‹¦æˆªå™¨ï¼Œä¸»è¦å±æ€§ï¼š applicationNameï¼šå¼¹å‡ºç™»å½•æ¡†æ˜¾ç¤ºçš„ä¿¡æ¯ï¼ˆapplicationï¼‰</td></tr><tr><td>logout</td><td>authc.LogoutFilter</td><td align="center">é€€å‡ºæ‹¦æˆªå™¨ï¼Œä¸»è¦å±æ€§ï¼šredirectUrlï¼šé€€å‡ºæˆåŠŸåé‡å®šå‘çš„åœ°å€ï¼ˆ/ï¼‰</td></tr><tr><td>user</td><td>UserFilter</td><td align="center">ç”¨æˆ·æ‹¦æˆªå™¨ï¼Œç”¨æˆ·å·²ç»èº«ä»½éªŒè¯/è®°ä½æˆ‘ç™»å½•çš„éƒ½å¯</td></tr><tr><td>æˆæƒç›¸å…³</td><td></td><td align="center"></td></tr><tr><td>roles</td><td>RolesAuthorizationFilter</td><td align="center">è§’è‰²æˆæƒæ‹¦æˆªå™¨ï¼ŒéªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æ‰€æœ‰è§’è‰²ï¼›ä¸»è¦å±æ€§ï¼š loginUrlï¼šç™»å½•é¡µé¢åœ°å€ï¼ˆ/login.jspï¼‰ï¼›unauthorizedUrlï¼šæœªæˆæƒåé‡å®šå‘çš„åœ°å€ï¼›ç¤ºä¾‹â€œ/admin/**=roles[admin]â€</td></tr><tr><td>perms</td><td>PermissionsAuthorizationFilter</td><td align="center">æƒé™æˆæƒæ‹¦æˆªå™¨ï¼ŒéªŒè¯ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼›å±æ€§å’Œrolesä¸€æ ·ï¼›ç¤ºä¾‹â€œ/user/**=perms[â€œuser:createâ€]â€</td></tr><tr><td>port</td><td>PortFilter</td><td align="center">ç«¯å£æ‹¦æˆªå™¨ï¼Œä¸»è¦å±æ€§ï¼športï¼ˆ80ï¼‰ï¼šå¯ä»¥é€šè¿‡çš„ç«¯å£ï¼›ç¤ºä¾‹â€œ/test= port[80]â€ï¼Œå¦‚æœç”¨æˆ·è®¿é—®è¯¥é¡µé¢æ˜¯é80ï¼Œå°†è‡ªåŠ¨å°†è¯·æ±‚ç«¯å£æ”¹ä¸º80å¹¶é‡å®šå‘åˆ°è¯¥80ç«¯å£ï¼Œå…¶ä»–è·¯å¾„/å‚æ•°ç­‰éƒ½ä¸€æ ·</td></tr><tr><td>rest</td><td>HttpMethodPermissionFilter</td><td align="center">resté£æ ¼æ‹¦æˆªå™¨ï¼Œè‡ªåŠ¨æ ¹æ®è¯·æ±‚æ–¹æ³•æ„å»ºæƒé™å­—ç¬¦ä¸²ï¼ˆGET=read, POST=create,PUT=update,DELETE=delete,HEAD=read,TRACE=read,OPTIONS=read, MKCOL=createï¼‰æ„å»ºæƒé™å­—ç¬¦ä¸²ï¼›ç¤ºä¾‹â€œ/users=rest[user]â€ï¼Œä¼šè‡ªåŠ¨æ‹¼å‡ºâ€œuser:read,user:create,user:update,user:deleteâ€æƒé™å­—ç¬¦ä¸²è¿›è¡Œæƒé™åŒ¹é…ï¼ˆæ‰€æœ‰éƒ½å¾—åŒ¹é…ï¼ŒisPermittedAllï¼‰</td></tr><tr><td>ssl</td><td>SslFilter</td><td align="center">SSLæ‹¦æˆªå™¨ï¼Œåªæœ‰è¯·æ±‚åè®®æ˜¯httpsæ‰èƒ½é€šè¿‡ï¼›å¦åˆ™è‡ªåŠ¨è·³è½¬ä¼šhttpsç«¯å£ï¼ˆ443ï¼‰ï¼›å…¶ä»–å’Œportæ‹¦æˆªå™¨ä¸€æ ·</td></tr><tr><td>noSessionCreation</td><td>NoSessionCreationAuthorizationFilter</td><td align="center">éœ€è¦æŒ‡å®šæƒé™æ‰èƒ½è®¿é—®</td></tr></tbody></table><h2 id="å¤©å‘æŠ¥é”™ä¿¡æ¯"><a href="#å¤©å‘æŠ¥é”™ä¿¡æ¯" class="headerlink" title="å¤©å‘æŠ¥é”™ä¿¡æ¯"></a>å¤©å‘æŠ¥é”™ä¿¡æ¯</h2><ol><li><h3 id="springbootæ•´åˆshiroç”¨æˆ·æˆæƒjava-lang-ClassCastException-org-apache-shiro-subject-SimplePrincipalCollection-cannot-be-cast-to-java-lang-String"><a href="#springbootæ•´åˆshiroç”¨æˆ·æˆæƒjava-lang-ClassCastException-org-apache-shiro-subject-SimplePrincipalCollection-cannot-be-cast-to-java-lang-String" class="headerlink" title="springbootæ•´åˆshiroç”¨æˆ·æˆæƒjava.lang.ClassCastException: org.apache.shiro.subject.SimplePrincipalCollection cannot be cast to java.lang.String"></a>springbootæ•´åˆshiroç”¨æˆ·æˆæƒjava.lang.ClassCastException: org.apache.shiro.subject.SimplePrincipalCollection cannot be cast to java.lang.String</h3></li></ol><p><img src="/2021/04/04/shiro-zheng-he-springboot/image-20210406173458650.png" alt="image-20210406173458650"></p><ol start="2"><li><h3 id="åŠ ç›çš„SimpleSource-æ²¡æœ‰åºåˆ—åŒ–ï¼Œéœ€è¦è‡ªå·±å®ç°å¹¶ä¸”åºåˆ—åŒ–"><a href="#åŠ ç›çš„SimpleSource-æ²¡æœ‰åºåˆ—åŒ–ï¼Œéœ€è¦è‡ªå·±å®ç°å¹¶ä¸”åºåˆ—åŒ–" class="headerlink" title="åŠ ç›çš„SimpleSource æ²¡æœ‰åºåˆ—åŒ–ï¼Œéœ€è¦è‡ªå·±å®ç°å¹¶ä¸”åºåˆ—åŒ–"></a>åŠ ç›çš„SimpleSource æ²¡æœ‰åºåˆ—åŒ–ï¼Œéœ€è¦è‡ªå·±å®ç°å¹¶ä¸”åºåˆ—åŒ–</h3></li></ol><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>zxh<span class="token punctuation">.</span>shirotest<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>salt<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>Base64<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>CodecSupport<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>Hex<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ByteSource<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>util<span class="token punctuation">.</span>SimpleByteSource<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>File<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>InputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Serializable<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author: zhangxuhui * @date: 2021/4/6 * @description: è§£å†³ SimpleByteSource æ— æ³•åºåˆ—åŒ–çš„é—®é¢˜ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyByteSource</span> <span class="token keyword">implements</span> <span class="token class-name">ByteSource</span><span class="token punctuation">,</span>Serializable <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">;</span>    <span class="token keyword">private</span> String cachedHex<span class="token punctuation">;</span>    <span class="token keyword">private</span> String cachedBase64<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">=</span> bytes<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">=</span> CodecSupport<span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span>String string<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">=</span> CodecSupport<span class="token punctuation">.</span><span class="token function">toBytes</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span>ByteSource source<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span>File file<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyByteSource<span class="token punctuation">.</span>BytesHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">MyByteSource</span><span class="token punctuation">(</span>InputStream stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyByteSource<span class="token punctuation">.</span>BytesHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isCompatible</span><span class="token punctuation">(</span>Object o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> o <span class="token keyword">instanceof</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">||</span> o <span class="token keyword">instanceof</span> <span class="token class-name">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">||</span> o <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token operator">||</span>                o <span class="token keyword">instanceof</span> <span class="token class-name">ByteSource</span> <span class="token operator">||</span> o <span class="token keyword">instanceof</span> <span class="token class-name">File</span> <span class="token operator">||</span> o <span class="token keyword">instanceof</span> <span class="token class-name">InputStream</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bytes<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">==</span> null <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bytes<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toHex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachedHex <span class="token operator">==</span> null <span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cachedHex <span class="token operator">=</span> Hex<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachedHex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachedBase64 <span class="token operator">==</span> null <span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cachedBase64 <span class="token operator">=</span> Base64<span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cachedBase64<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">toBase64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bytes <span class="token operator">==</span> null <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>bytes<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> Arrays<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span>Object o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">ByteSource</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            ByteSource bs <span class="token operator">=</span> <span class="token punctuation">(</span>ByteSource<span class="token punctuation">)</span> o<span class="token punctuation">;</span>            <span class="token keyword">return</span> Arrays<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bs<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//will probably be removed in Shiro 2.0.  See SHIRO-203:</span>    <span class="token comment" spellcheck="true">//https://issues.apache.org/jira/browse/SHIRO-203</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">BytesHelper</span> <span class="token keyword">extends</span> <span class="token class-name">CodecSupport</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/**         * åµŒå¥—ç±»ä¹Ÿéœ€è¦æä¾›æ— å‚æ„é€ å™¨         */</span>        <span class="token keyword">private</span> <span class="token function">BytesHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBytes</span><span class="token punctuation">(</span>File file<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">toBytes</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBytes</span><span class="token punctuation">(</span>InputStream stream<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">toBytes</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> shiro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›æº¯_å…¨æ’åˆ—</title>
      <link href="2021/04/02/hui-su-quan-pai-lie/"/>
      <url>2021/04/02/hui-su-quan-pai-lie/</url>
      
        <content type="html"><![CDATA[<p>è¶…çº§å¯çˆ±çš„å›æº¯ç®—æ³•</p><span id="more"></span><h2 id="å›æº¯æ¨¡ç‰ˆ"><a href="#å›æº¯æ¨¡ç‰ˆ" class="headerlink" title="å›æº¯æ¨¡ç‰ˆ"></a>å›æº¯æ¨¡ç‰ˆ</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Backtrack</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">backtracking</span> <span class="token punctuation">(</span><span class="token comment" spellcheck="true">/*å‚æ•°*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/*          å®šä¹‰ä¸¤ä¸ªæˆå‘˜å˜é‡          ä¸€ä¸ªæ”¶é›†æ»¡è¶³è¦æ±‚çš„ ç»“æœ          ä¸€ä¸ªæ”¶é›† ä½œä¸ºä¸­é€”å°è¯•çš„å€¼ï¼Œè¿›è¡Œå›é€€        */</span>        <span class="token comment" spellcheck="true">/*        if (ç»ˆæ­¢æ¡ä»¶) {            å­˜æ”¾ç»“æœ            ç»ˆæ­¢æœ¬å±‚å¾ªç¯            return;        }        éå†æœ¬å±‚é›†åˆä¸­çš„å…ƒç´         for (é€‰æ‹©ï¼šæœ¬å±‚é›†åˆä¸­å…ƒç´ [æ ‘ä¸­èŠ‚ç‚¹å­©å­çš„æ•°é‡å°±æ˜¯é›†åˆçš„å¤§å°]) {            å¤„ç†èŠ‚ç‚¹;            backtracking(è·¯å¾„ï¼Œé€‰æ‹©åˆ—è¡¨); // é€’å½’            å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ        }        */</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><p><img src="/2021/04/02/hui-su-quan-pai-lie/image-20210402215919604.png" alt="image-20210402215919604"></p><p><strong>åšé¢˜ä¹‹å‰ï¼Œå…ˆå­¦ä¹ ä¸€ä¸‹å¤šå‰æ ‘çš„éå†ï¼Œç„¶åè¿™é‡Œç”¨ä¸€ä¸ª{ 1 , 2 , 3 }çš„å…¨æ’åˆ—ä½œä¸ºDemo</strong></p><h3 id="å¤šå‰æ ‘éå†æ¨¡ç‰ˆ"><a href="#å¤šå‰æ ‘éå†æ¨¡ç‰ˆ" class="headerlink" title="å¤šå‰æ ‘éå†æ¨¡ç‰ˆ"></a>å¤šå‰æ ‘éå†æ¨¡ç‰ˆ</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/* åŸºæœ¬çš„ N å‰æ ‘èŠ‚ç‚¹ */</span><span class="token keyword">class</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> val<span class="token punctuation">;</span>    TreeNode<span class="token punctuation">[</span><span class="token punctuation">]</span> children<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">traverse</span><span class="token punctuation">(</span>TreeNode root<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>TreeNode child <span class="token operator">:</span> root<span class="token punctuation">.</span>children<span class="token punctuation">)</span>        <span class="token function">traverse</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><img src="/2021/04/02/hui-su-quan-pai-lie/image-20210403111323718.png" alt="image-20210403111323718"></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Permution1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span><span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>path<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>           res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>i<span class="token punctuation">,</span>path<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token comment" spellcheck="true">//        dfs(nums,0,path,res);</span><span class="token comment" spellcheck="true">//        dfs(nums,1,path,res);</span><span class="token comment" spellcheck="true">//        dfs(nums,2,path,res);</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> permute <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Permution1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        permute<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><code>è¾“å‡ºç»“æœ</code></p><pre class=" language-java"><code class="language-java"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span></code></pre><p>æ¥ä¸‹æ¥è€ƒè™‘ä¸€ç§æƒ…å†µï¼Œå°†Demoä¸­å†—ä½™ä»£ç åˆå¹¶ï¼Œç»†èŠ‚åƒè¿™æ ·å­çš„</p><pre class=" language-java"><code class="language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span></code></pre><p>è¿™æ ·ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>ä¼šå¢åŠ å†—ä½™ï¼Œä¾‹å¦‚æœ‰ï¼šä¸‰ä¸ª 1ï¼Œ1ï¼Œ1 â€¦â€¦</p><p>å®ƒä¼šå»ç»§ç»­åˆ¤æ–­æ–°çš„åˆ†æ”¯ï¼Œåœ¨returnçš„æ—¶å€™ä¼šé‡å¤æ·»åŠ  path åˆ° res ä¸­å»</p><p><img src="/2021/04/02/hui-su-quan-pai-lie/image-20210403140632323.png" alt="image-20210403140632323"></p><p>ä¸€å¼€å§‹æˆ‘æ˜¯å¾ˆä¸ç†è§£çš„ï¼Œä¸ºä»€ä¹ˆæ¡ä»¶æ˜¯ path.size() == nums.length è¿™é‡Œçš„ size æ˜æ˜æ˜¯4 ä¸ºä»€ä¹ˆè¿˜èƒ½è¿›è¡Œä¸‹å»ï¼Ÿ</p><p>åˆ°è¿™é‡Œä¹‹å‰ä¸åº”è¯¥æ˜¯ å·²ç»è¿”å›äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜ä¼šèµ°ä¸‹å»ï¼Ÿ</p><p>å¸¦ç€ç–‘é—®ï¼Œæˆ‘ç»§ç»­ç ”ç©¶äº†ä¸€ä¸‹å“ˆ</p><p>åŸæ¥ï¼Œåœ¨è¿›å…¥ç¬¬å››å±‚çš„æ—¶å€™ï¼Œé¦–å…ˆè¿›å…¥ifåˆ¤æ–­ï¼Œåœ¨è¿›è¡Œ path çš„æ·»åŠ ï¼Œè¿™æ—¶å€™ path.size =4 </p><p>ä½†æ˜¯åœ¨ if åˆ¤æ–­çš„æ—¶å€™ï¼Œ å°±ä¼šç»ˆæ­¢æ¡ä»¶äº†ï¼Œå› ä¸ºå®ƒçš„ path.size = 3 äº† ï¼Œè¿™æ—¶å€™å°±ä¼š return </p><p>å®ƒæ ¹æœ¬ä¸èƒ½åœ¨è¿›è¡Œæ·»åŠ ã€‚</p><p>bug å°±åœ¨ if åˆ¤æ–­é‡Œ ï¼Œåˆ¤æ–­çš„æ—¶å€™ï¼Œä¼š add path åˆ° res ä¸­ï¼Œä¼šå¤šæ‰§è¡Œ 3 æ¬¡ï¼Œæ‰€ä»¥å†—ä½™äº† ä¸‰ä¸ª 1ï¼Œ 1ï¼Œ 1</p><blockquote><p>æ”¹è¿›</p></blockquote><h3 id="æ›´æ”¹åçš„dfs"><a href="#æ›´æ”¹åçš„dfs" class="headerlink" title="æ›´æ”¹åçš„dfs"></a>æ›´æ”¹åçš„dfs</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>i<span class="token punctuation">,</span>path<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¿™å°±æ˜¯å›æº¯çš„æœ¬è´¨ï¼Œå›æº¯å›æº¯ï¼Œå°±æ˜¯åœ¨å½“å‰æ¡ä»¶ä¸‹ï¼Œ</p><p>æ–°å¢æ¡ä»¶ï¼Œæ·»åŠ åˆ°ç»“æœé›†ä¸­ï¼Œå»é™¤æ¡ä»¶ï¼Œ</p><p>æ–°å¢å¦ä¸€ä¸ªæ¡ä»¶ï¼Œæ·»åŠ åˆ°ç»“æœé›†ä¸­ï¼Œ</p><p>â€¦ </p><p>ä»¥æ­¤ç±»æ¨</p><p>æœ€åï¼Œä»ç»“æœé›†ä¸­é€‰å–åˆé€‚çš„ç»“æœï¼Œè¿”å›ã€‚</p><h3 id="è¿›è¡Œå‰ªæ"><a href="#è¿›è¡Œå‰ªæ" class="headerlink" title="è¿›è¡Œå‰ªæ"></a>è¿›è¡Œå‰ªæ</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span>  List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>path<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>        path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="é¢˜è§£ä»£ç "><a href="#é¢˜è§£ä»£ç " class="headerlink" title="é¢˜è§£ä»£ç "></a>é¢˜è§£ä»£ç </h2><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Permution2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> <span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>  path<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span>  List<span class="token operator">&lt;</span>Integer<span class="token operator">></span> path<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            path<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>path<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>            path<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>Integer<span class="token operator">>></span> permute <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Permution2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        permute<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>out<span class="token operator">:</span><span class="token operator">:</span>println<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><ol><li>æ·±å…¥ç†è§£å¤šå‰æ ‘çš„éå†</li><li>çŸ¥é“è‡ªå·±è¦å¹²ä»€ä¹ˆï¼Œå¯¹ç…§æ¨¡ç‰ˆå°±okäº†</li><li>æ²¡å•¥éš¾åº¦ï¼Œç¡®å®</li><li>å›æº¯â€”&gt;è´ªå¿ƒâ€”&gt;åŠ¨æ€è§„åˆ’</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å›æº¯ç®—æ³• </tag>
            
            <tag> leetcode </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2021/04/02/hexo-de-ji-ben-shi-yong/"/>
      <url>2021/04/02/hexo-de-ji-ben-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>hexoçš„åŸºæœ¬ä½¿ç”¨ï¼Œå’Œé‡åˆ°çš„å¤§å‘</p><span id="more"></span><h2 id="å»ºç«‹æ–‡ç« "><a href="#å»ºç«‹æ–‡ç« " class="headerlink" title="å»ºç«‹æ–‡ç« "></a>å»ºç«‹æ–‡ç« </h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">æ–°å»ºæ–‡ç« </span><br><span class="line">hexo <span class="keyword">new</span> <span class="string">"æ–‡ç« æ–‡å­—"</span>(ç®€å†™ hexo n)</span><br><span class="line">æ–°å»ºé¡µé¢</span><br><span class="line">hexo <span class="keyword">new</span> page <span class="string">"é¡µé¢åå­—"</span></span><br></pre></td></tr></tbody></table></figure><h2 id="æ–‡ç« é‡Œæ’å…¥å›¾ç‰‡"><a href="#æ–‡ç« é‡Œæ’å…¥å›¾ç‰‡" class="headerlink" title="æ–‡ç« é‡Œæ’å…¥å›¾ç‰‡"></a>æ–‡ç« é‡Œæ’å…¥å›¾ç‰‡</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">{% asset_img å›¾ç‰‡æ–‡ä»¶åå­— %}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ¨¡ç‰ˆ"><a href="#æ¨¡ç‰ˆ" class="headerlink" title="æ¨¡ç‰ˆ"></a>æ¨¡ç‰ˆ</h3><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: å›æº¯ç®—æ³•_å…¨æ’åˆ—</span><br><span class="line">date: <span class="number">2021</span>-<span class="number">04</span>-<span class="number">01</span> <span class="number">21</span>:<span class="number">10</span>:<span class="number">14</span></span><br><span class="line">tags:</span><br><span class="line">- ç®—æ³•</span><br><span class="line">- leetcode</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">æˆ‘æ˜¯çŸ­å°ç²¾æ‚çš„æ–‡ç« æ‘˜è¦(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="éƒ¨ç½²å‘½ä»¤"><a href="#éƒ¨ç½²å‘½ä»¤" class="headerlink" title="éƒ¨ç½²å‘½ä»¤"></a>éƒ¨ç½²å‘½ä»¤</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">æ¸…ç©ºç¼“å­˜ </span><br><span class="line">hexo clean </span><br><span class="line">ç”Ÿæˆé™æ€é¡µé¢è‡³<span class="keyword">public</span>ç›®å½• </span><br><span class="line"><span class="function">hexo <span class="title">generate</span> <span class="params">(ç®€å†™ hexo g)</span></span></span><br><span class="line"><span class="function">é¡¹ç›®éƒ¨ç½²</span></span><br><span class="line"><span class="function">hexo <span class="title">deploy</span> <span class="params">(ç®€å†™ hexo d)</span></span></span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šæ˜¯éƒ¨ç½²å¿…é¡»è¦çš„æ­¥éª¤</p><h2 id="æœ¬åœ°è¿è¡Œ"><a href="#æœ¬åœ°è¿è¡Œ" class="headerlink" title="æœ¬åœ°è¿è¡Œ"></a>æœ¬åœ°è¿è¡Œ</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£<span class="number">4000</span>ï¼Œctrl+c å…³é—­serverï¼‰</span><br><span class="line"><span class="function">hexo <span class="title">server</span> <span class="params">(ç®€å†™ hexo s)</span></span></span><br></pre></td></tr></tbody></table></figure><h2 id="gitæäº¤"><a href="#gitæäº¤" class="headerlink" title="gitæäº¤"></a>gitæäº¤</h2><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">git checkout master # åˆ‡æ¢åˆ°masteråˆ†æ”¯</span><br><span class="line"></span><br><span class="line">git add . #æˆ‘ä¸çŸ¥é“å•¥æ„æ€</span><br><span class="line"></span><br><span class="line">git commit -am"${æäº¤çš„ä¿¡æ¯}" #ç…§ç€å†™å°±è¡Œå•¦</span><br><span class="line"></span><br><span class="line">git push # æäº¤</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="é‡åˆ°çš„ä¸€äº›é—®é¢˜"><a href="#é‡åˆ°çš„ä¸€äº›é—®é¢˜" class="headerlink" title="é‡åˆ°çš„ä¸€äº›é—®é¢˜"></a>é‡åˆ°çš„ä¸€äº›é—®é¢˜</h2><p>ä½¿ç”¨ <code>hexo-prism-plugin</code>çš„æ—¶å€™ï¼Œéœ€è¦ä¾èµ–<code>hexo-inject</code></p><h3 id="é‡åˆ°çš„è¶…çº§å¤§å‘cssæ ·å¼åŠ è½½ä¸å‡ºæ¥"><a href="#é‡åˆ°çš„è¶…çº§å¤§å‘cssæ ·å¼åŠ è½½ä¸å‡ºæ¥" class="headerlink" title="é‡åˆ°çš„è¶…çº§å¤§å‘cssæ ·å¼åŠ è½½ä¸å‡ºæ¥"></a>é‡åˆ°çš„è¶…çº§å¤§å‘cssæ ·å¼åŠ è½½ä¸å‡ºæ¥</h3><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">è§£å†³åŠæ³•</span><br><span class="line"># URL</span><br><span class="line">## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'</span><br><span class="line">url: https:<span class="comment">//amberzxh.github.io/</span></span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks</span><br><span class="line">  trailing_html: true # Set to false to remove trailing '.html' from permalinks</span><br></pre></td></tr></tbody></table></figure><p>è¦å°†è¿™é‡Œçš„rootæ”¹ä¸º /ï¼Œä¸€å®šè¦æ”¹ä¸º/ï¼Œå¯¹æˆ‘è‡ªå·±æ¥è¯´ï¼ï¼ï¼</p><h4 id="å¦å¤–è¯´æ˜ä¸€ä¸‹master-å’Œ-gh-pagesè¿™ä¸¤ä¸ªåˆ†æ”¯"><a href="#å¦å¤–è¯´æ˜ä¸€ä¸‹master-å’Œ-gh-pagesè¿™ä¸¤ä¸ªåˆ†æ”¯" class="headerlink" title="å¦å¤–è¯´æ˜ä¸€ä¸‹master å’Œ gh-pagesè¿™ä¸¤ä¸ªåˆ†æ”¯"></a>å¦å¤–è¯´æ˜ä¸€ä¸‹master å’Œ gh-pagesè¿™ä¸¤ä¸ªåˆ†æ”¯</h4><p> master åˆ†æ”¯æ˜¯ä½œä¸ºå¤‡ä»½ä½¿ç”¨çš„ï¼Œè€Œ gh-pages æ˜¯çœŸæ­£hexoçš„éƒ¨ç½²ç½‘é¡µ</p><p>æ¯æ¬¡æäº¤åªéœ€è¦æ‰§è¡Œ</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git add .</span><br><span class="line">git commit am"${æäº¤ä¿¡æ¯}" #è¿™é‡Œmsgä¸€å®šè¦å¡«å†™ï¼Œä¸ç„¶ä¸èƒ½æäº¤</span><br><span class="line">git push</span><br></pre></td></tr></tbody></table></figure><p>åŸå› ï¼šæˆ‘é…ç½®äº†travis-ci åªè¦æäº¤masterï¼Œå®ƒä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨éƒ¨ç½²gh-pages</p><p>æ‰€ä»¥åªéœ€è¦æäº¤ master åˆ†æ”¯å°±è¡Œäº†</p><p>è¿æ ¹ç›®å½•ä¸‹çš„_config.xmlé‡Œé¢çš„repo ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰äº†</p><img src="/2021/04/02/hexo-de-ji-ben-shi-yong/2021-04-02-02-06.jpg" class=""><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>Hexo å†™çš„åšå®¢é‡Œæ²¡æœ‰H1 ï¼Œè‡ªåŠ¨ç”Ÿæˆç›®å½•æ ¹æ®H2æ¥è®¡ç®—çš„ã€‚</p><h3 id="Hero-æ•´åˆtypora"><a href="#Hero-æ•´åˆtypora" class="headerlink" title="Hero æ•´åˆtypora"></a>Hero æ•´åˆtypora</h3><h5 id="è®¾ç½®-gt-å›¾åƒ"><a href="#è®¾ç½®-gt-å›¾åƒ" class="headerlink" title="è®¾ç½®->å›¾åƒ"></a>è®¾ç½®-&gt;å›¾åƒ</h5><p><img src="/2021/04/02/hexo-de-ji-ben-shi-yong/image-20210402134846170.png" alt="image-20210402134846170"></p><h5 id="ç»“æŸåæ›¿æ¢"><a href="#ç»“æŸåæ›¿æ¢" class="headerlink" title="ç»“æŸåæ›¿æ¢"></a>ç»“æŸåæ›¿æ¢</h5><p>å°† â€œæ–‡ç« å/â€ â€”-&gt;å…¨éƒ¨æ›¿æ¢ä¸ºç©º â€œ â€</p><p>æ³¨æ„ ä¸€å®šæ˜¯è¦ â€œæ–‡ç« åâ€œ + â€/â€œ</p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›æº¯ç®—æ³•_å…¨æ’åˆ—</title>
      <link href="2021/04/01/hui-su-suan-fa-quan-pai-lie/"/>
      <url>2021/04/01/hui-su-suan-fa-quan-pai-lie/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘æ˜¯çŸ­å°ç²¾æ‚çš„æ–‡ç« æ‘˜è¦(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</p><span id="more"></span><img src="/2021/04/01/hui-su-suan-fa-quan-pai-lie/example.jpg" class=""><h1 id="title1-0"><a href="#title1-0" class="headerlink" title="title1.0"></a>title1.0</h1><h2 id="title1-1"><a href="#title1-1" class="headerlink" title="title1.1"></a>title1.1</h2><h1 id="title2-0"><a href="#title2-0" class="headerlink" title="title2.0"></a>title2.0</h1><h2 id="title2-1"><a href="#title2-1" class="headerlink" title="title2.1"></a>title2.1</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">twoSum</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ret<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> right <span class="token operator">=</span> len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>right<span class="token operator">></span>left<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">int</span> temp <span class="token operator">=</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token operator">&lt;</span>temp<span class="token punctuation">)</span><span class="token punctuation">{</span>                right<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> target<span class="token operator">></span> temp<span class="token punctuation">)</span><span class="token punctuation">{</span>                left<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>left<span class="token punctuation">;</span>                ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>right<span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>                <span class="token keyword">return</span> ret<span class="token punctuation">;</span>                        </code></pre><img src="/2021/04/01/hui-su-suan-fa-quan-pai-lie/2021-04-01-22-09.jpg" class=""><p><img src="/2021/04/01/hui-su-suan-fa-quan-pai-lie/image-20210402133240045.png" alt="image-20210402133240045"></p><p><img src="/2021/04/01/hui-su-suan-fa-quan-pai-lie/image-20210402134428652.png" alt="image-20210402134428652"></p>]]></content>
      
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
